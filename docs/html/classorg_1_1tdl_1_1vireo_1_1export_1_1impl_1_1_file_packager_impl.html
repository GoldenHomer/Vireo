<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Vireo: org.tdl.vireo.export.impl.FilePackagerImpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">3.0.x-RC</span>
   </div>
   <div id="projectbrief">Vireo Electronic Thesis and Dissertation Submission System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.tdl.vireo.export.impl.FilePackagerImpl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for org.tdl.vireo.export.impl.FilePackagerImpl:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl__inherit__graph.png" border="0" usemap="#org_8tdl_8vireo_8export_8impl_8_file_packager_impl_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8tdl_8vireo_8export_8impl_8_file_packager_impl_inherit__map" id="org_8tdl_8vireo_8export_8impl_8_file_packager_impl_inherit__map">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html" title="org.tdl.vireo.export.impl.\lAbstractPackagerImpl" alt="" coords="109,81,272,122"/><area shape="rect" id="node3" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_packager.html" title="org.tdl.vireo.export.Packager" alt="" coords="5,5,195,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for org.tdl.vireo.export.impl.FilePackagerImpl:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl__coll__graph.png" border="0" usemap="#org_8tdl_8vireo_8export_8impl_8_file_packager_impl_coll__map" alt="Collaboration graph"/></div>
<map name="org_8tdl_8vireo_8export_8impl_8_file_packager_impl_coll__map" id="org_8tdl_8vireo_8export_8impl_8_file_packager_impl_coll__map">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html" title="org.tdl.vireo.export.impl.\lAbstractPackagerImpl" alt="" coords="248,23,411,65"/><area shape="rect" id="node3" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_packager.html" title="org.tdl.vireo.export.Packager" alt="" coords="5,5,195,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_1_1_file_package.html">FilePackage</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f4507a0d5bc9f9e4a42a5ca89704a37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2f4507a0d5bc9f9e4a42a5ca89704a37">setAttachmentTypeNames</a> (LinkedHashMap&lt; String, Properties &gt; attachmentTypeNames)</td></tr>
<tr class="separator:a2f4507a0d5bc9f9e4a42a5ca89704a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5401e7c29586ed175b3ebf30b2ab0721"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a5401e7c29586ed175b3ebf30b2ab0721">setEntryName</a> (String <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">entryName</a>)</td></tr>
<tr class="separator:a5401e7c29586ed175b3ebf30b2ab0721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53e2085bec74f562f2f8a50b98b9da91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a53e2085bec74f562f2f8a50b98b9da91">setPackageType</a> (String <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#ac0c5ebf534069ffa6fadc678c37200b0">packageType</a>)</td></tr>
<tr class="separator:a53e2085bec74f562f2f8a50b98b9da91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd941d6d5962e8e00c5a2c9a3970fcaf"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#acd941d6d5962e8e00c5a2c9a3970fcaf">getExportServiceBeanName</a> ()</td></tr>
<tr class="separator:acd941d6d5962e8e00c5a2c9a3970fcaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52ede47d99b5e1cb7e31289ad865fae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_export_package.html">ExportPackage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#aa52ede47d99b5e1cb7e31289ad865fae">generatePackage</a> (<a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a> submission)</td></tr>
<tr class="separator:aa52ede47d99b5e1cb7e31289ad865fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html">org.tdl.vireo.export.impl.AbstractPackagerImpl</a></td></tr>
<tr class="memitem:a1b7398a578f2a6ba01e1f0d55e34ff4e inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#a1b7398a578f2a6ba01e1f0d55e34ff4e">getBeanName</a> ()</td></tr>
<tr class="separator:a1b7398a578f2a6ba01e1f0d55e34ff4e inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f02f1f006f540925feb486fb9b9ac9a inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#a4f02f1f006f540925feb486fb9b9ac9a">setBeanName</a> (String <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#afd82415a6c05e873b8b65dd2ec02910c">beanName</a>)</td></tr>
<tr class="separator:a4f02f1f006f540925feb486fb9b9ac9a inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa6db6715184f9c74590c7bb1d389ba0 inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#afa6db6715184f9c74590c7bb1d389ba0">getDisplayName</a> ()</td></tr>
<tr class="separator:afa6db6715184f9c74590c7bb1d389ba0 inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae351042d5a6468fb889f8814fbfdeb37 inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#ae351042d5a6468fb889f8814fbfdeb37">setDisplayName</a> (String <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#a5f49cadbe650e98d7ee92494016cae71">displayName</a>)</td></tr>
<tr class="separator:ae351042d5a6468fb889f8814fbfdeb37 inherit pub_methods_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a27ebe37a40274409e3e97a4dccbf84b7"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html">AttachmentType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a27ebe37a40274409e3e97a4dccbf84b7">attachmentTypes</a> = new ArrayList&lt;<a class="el" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html">AttachmentType</a>&gt;()</td></tr>
<tr class="separator:a27ebe37a40274409e3e97a4dccbf84b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2db4a794609001cce3e809bf622e583c"><td class="memItemLeft" align="right" valign="top">LinkedHashMap&lt; String, Properties &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a> = new LinkedHashMap&lt;String, Properties&gt;()</td></tr>
<tr class="separator:a2db4a794609001cce3e809bf622e583c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58dfc78d2c2f8ab13d199441ea0d20af"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">entryName</a></td></tr>
<tr class="separator:a58dfc78d2c2f8ab13d199441ea0d20af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0c5ebf534069ffa6fadc678c37200b0"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#ac0c5ebf534069ffa6fadc678c37200b0">packageType</a> = &quot;dir&quot;</td></tr>
<tr class="separator:ac0c5ebf534069ffa6fadc678c37200b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html">org.tdl.vireo.export.impl.AbstractPackagerImpl</a></td></tr>
<tr class="memitem:afd82415a6c05e873b8b65dd2ec02910c inherit pub_attribs_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#afd82415a6c05e873b8b65dd2ec02910c">beanName</a></td></tr>
<tr class="separator:afd82415a6c05e873b8b65dd2ec02910c inherit pub_attribs_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f49cadbe650e98d7ee92494016cae71 inherit pub_attribs_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl.html#a5f49cadbe650e98d7ee92494016cae71">displayName</a></td></tr>
<tr class="separator:a5f49cadbe650e98d7ee92494016cae71 inherit pub_attribs_classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_abstract_packager_impl"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generic packager that uses a the standard play templating system to generate manifests for packages. Each packaged produced will consist of a manifest file, along with a series of files. This packaged is ziped together into a single bundle ready for deposit.</p>
<p>The values that define what format, which files, etc, are all injected by spring. This allows for many different package formats to be created by just adding a new spring bean definition. See each of the injection methods below for a description of the various injectable settings.</p>
<dl class="section author"><dt>Author</dt><dd><a href="http://www.scottphillips.com">Scott Phillips</a> </dd>
<dd>
Micah Cooper </dd>
<dd>
<a href="#" onclick="location.href='mai'+'lto:'+'huf'+'f@'+'lib'+'ra'+'ry.'+'ta'+'mu.'+'ed'+'u'; return false;">Jeremy Huff</a> </dd>
<dd>
<a href="#" onclick="location.href='mai'+'lto:'+'gad'+'.k'+'rum'+'ho'+'lz@'+'au'+'sti'+'n.'+'ute'+'xa'+'s.e'+'du'; return false;">Gad Krumholz</a> </dd></dl>

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00049">49</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa52ede47d99b5e1cb7e31289ad865fae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_export_package.html">ExportPackage</a> org.tdl.vireo.export.impl.FilePackagerImpl.generatePackage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a>&#160;</td>
          <td class="paramname"><em>submission</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate a new package for this submission.</p>
<p>The package returned will file system resources so it is very important that any caller who constructs a package also calls delete() to free those resources used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">submission</td><td>The submission </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A package </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_packager.html#a2a7f656b04d59dd07ec54312c34da432">org.tdl.vireo.export.Packager</a>.</p>

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00110">110</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>References <a class="el" href="_attachment_type_8java_source.html#l00017">org.tdl.vireo.model.AttachmentType.ACTIONLOG</a>, <a class="el" href="_file_packager_impl_8java_source.html#l00053">org.tdl.vireo.export.impl.FilePackagerImpl.attachmentAttributes</a>, <a class="el" href="_file_packager_impl_8java_source.html#l00052">org.tdl.vireo.export.impl.FilePackagerImpl.attachmentTypes</a>, <a class="el" href="_file_packager_impl_8java_source.html#l00054">org.tdl.vireo.export.impl.FilePackagerImpl.entryName</a>, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_abstract_model.html#adf9b6814dd10bc0848d4f17341c6e7b1">org.tdl.vireo.model.AbstractModel.getId()</a>, and <a class="el" href="_file_packager_impl_8java_source.html#l00055">org.tdl.vireo.export.impl.FilePackagerImpl.packageType</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                                                {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a27ebe37a40274409e3e97a4dccbf84b7">attachmentTypes</a>.size() == 0 ) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Unable to generate package because not attachment types have been defined.&quot;</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// Check that we have everything that we need.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> (submission == null || submission.getId() == null)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Unable to generate a package because the submission is null, or has not been persisted.&quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">//Set String replacement parameters </span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            Map&lt;String, String&gt; parameters = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            parameters = StringVariableReplacement.setParameters(submission);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="comment">//Customize Entry Name</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            String entryNameTemplate = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">entryName</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            String customEntryName = StringVariableReplacement.applyParameterSubstitution(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">entryName</a>, parameters);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            File pkg = null;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            List&lt;Attachment&gt; actionLogAttachments = <span class="keyword">new</span> ArrayList&lt;Attachment&gt;();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="comment">//Check the package type set in the spring configuration</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#ac0c5ebf534069ffa6fadc678c37200b0">packageType</a>.equals(<span class="stringliteral">&quot;zip&quot;</span>)) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                pkg = File.createTempFile(<span class="stringliteral">&quot;template-export-&quot;</span>, <span class="stringliteral">&quot;.zip&quot;</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(pkg);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                ZipOutputStream zos = <span class="keyword">new</span> ZipOutputStream(fos);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                byte[] buf = <span class="keyword">new</span> byte[1024];</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <span class="keywordtype">int</span> len;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                            </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="comment">// Add all the attachments</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                List&lt;Attachment&gt; attachments = submission.getAttachments();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                List&lt;Attachment&gt; actionLogs = submission.getAttachmentsByType(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html#a92c764fa1e72fb1a880999a24f0ab4a8">AttachmentType.ACTIONLOG</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="comment">// add them to this list to delete the temp files later</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                actionLogAttachments.addAll(actionLogs);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="comment">// add them to this list to add them to export</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                attachments.addAll(actionLogs);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="keywordflow">for</span>(Attachment attachment : attachments)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="comment">// Do we include this type?</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a27ebe37a40274409e3e97a4dccbf84b7">attachmentTypes</a>.contains(attachment.getType()))</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <span class="comment">/* The string substitution only works on items we can retrieve from the submission</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">                     *      so we have to get the file name for each attachment here in the attachment loop.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    String shortFileName = attachment.getName().replaceAll(<span class="stringliteral">&quot;.&quot;</span>+FilenameUtils.getExtension(attachment.getName()), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    String fileName = attachment.getName();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    <span class="comment">//Attachment Name Customization</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a>.get(attachment.getType().name()).get(<span class="stringliteral">&quot;customName&quot;</span>)!=null) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        fileName = attachmentAttributes.get(attachment.getType().name()).<span class="keyword">get</span>(<span class="stringliteral">&quot;customName&quot;</span>)+<span class="stringliteral">&quot;.&quot;</span>+FilenameUtils.getExtension(attachment.getName());</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                        fileName = fileName.replace(<span class="stringliteral">&quot;{FILE_NAME}&quot;</span>, shortFileName);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                        fileName = StringVariableReplacement.applyParameterSubstitution(fileName, parameters);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    <span class="comment">//Check fir custom directory structure set in spring</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    File exportFile = null;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    Boolean hasDir = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a>.get(attachment.getType().name()).get(<span class="stringliteral">&quot;directory&quot;</span>)!=null) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                        String dirName = (String) <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a>.get(attachment.getType().name()).get(<span class="stringliteral">&quot;directory&quot;</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                        dirName = dirName.replace(<span class="stringliteral">&quot;{FILE_NAME}&quot;</span>, shortFileName);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        dirName = StringVariableReplacement.applyParameterSubstitution(dirName, parameters);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        exportFile = <span class="keyword">new</span> File(dirName,fileName);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                        fileName = dirName + fileName;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        hasDir = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                        exportFile = <span class="keyword">new</span> File(fileName);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                                    </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    FileUtils.copyFile(</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                            attachment.getFile(),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                            exportFile</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                            );</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    ZipEntry ze = <span class="keyword">new</span> ZipEntry(fileName);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    zos.putNextEntry(ze);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    FileInputStream in = <span class="keyword">new</span> FileInputStream(exportFile);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">while</span> ((len = in.read(buf)) &gt; 0) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        zos.write(buf, 0, len);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    in.close();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    zos.closeEntry();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <span class="keywordflow">if</span>(hasDir) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        FileUtils.deleteDirectory(exportFile.getParentFile());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        exportFile.delete();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                zos.close();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                fos.close();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                pkg = File.createTempFile(<span class="stringliteral">&quot;template-export-&quot;</span>, <span class="stringliteral">&quot;.dir&quot;</span>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="comment">// The package has more than one file, so export as a directory.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                pkg.delete();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                pkg.mkdir();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                            </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                <span class="comment">// Add all the attachments</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                List&lt;Attachment&gt; attachments = submission.getAttachments();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                List&lt;Attachment&gt; actionLogs = submission.getAttachmentsByType(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html#a92c764fa1e72fb1a880999a24f0ab4a8">AttachmentType.ACTIONLOG</a>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="comment">// add them to this list to delete the temp files later</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                actionLogAttachments.addAll(actionLogs);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="comment">// add them to this list to add them to export</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                attachments.addAll(actionLogs);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                <span class="keywordflow">for</span>(Attachment attachment : attachments)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <span class="comment">// Do we include this type?</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a27ebe37a40274409e3e97a4dccbf84b7">attachmentTypes</a>.contains(attachment.getType()))</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    <span class="comment">/* The string substitution only works on items we can retrieve from the submission</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">                     *      so we have to get the file name for each attachment here in the attachment loop.</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    String shortFileName = attachment.getName().replaceAll(<span class="stringliteral">&quot;.&quot;</span>+FilenameUtils.getExtension(attachment.getName()), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    String fileName = attachment.getName(); </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    <span class="comment">//Customize Attachment Name</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a>.get(attachment.getType().name()).get(<span class="stringliteral">&quot;customName&quot;</span>)!=null) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        fileName = attachmentAttributes.get(attachment.getType().name()).<span class="keyword">get</span>(<span class="stringliteral">&quot;customName&quot;</span>)+<span class="stringliteral">&quot;.&quot;</span>+FilenameUtils.getExtension(attachment.getName());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                        fileName = fileName.replace(<span class="stringliteral">&quot;{FILE_NAME}&quot;</span>, shortFileName);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        fileName = StringVariableReplacement.applyParameterSubstitution(fileName, parameters);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    }                       </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    <span class="comment">//Check for Custom Directory Structure. </span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    String pkgPath = pkg.getPath();                     </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a>.get(attachment.getType().name()).get(<span class="stringliteral">&quot;directory&quot;</span>)!=null) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                        String dirName = (String) <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">attachmentAttributes</a>.get(attachment.getType().name()).get(<span class="stringliteral">&quot;directory&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                        dirName = dirName.replace(<span class="stringliteral">&quot;{FILE_NAME}&quot;</span>, shortFileName);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        dirName = StringVariableReplacement.applyParameterSubstitution(dirName, parameters);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                        pkgPath = pkgPath + File.separator + dirName;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    File exportFile = <span class="keyword">new</span> File(pkgPath, fileName);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                        </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    FileUtils.copyFile(</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        attachment.getFile(),</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        exportFile</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                }<span class="comment">//End for loop</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            this.setEntryName(entryNameTemplate);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">// Create the actual package!</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> FilePackage(submission, pkg, customEntryName, actionLogAttachments);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        } <span class="keywordflow">catch</span> (IOException ioe) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(<span class="stringliteral">&quot;Unable to generate package&quot;</span>,ioe);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_html_a58dfc78d2c2f8ab13d199441ea0d20af"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">org.tdl.vireo.export.impl.FilePackagerImpl.entryName</a></div><div class="ttdeci">String entryName</div><div class="ttdef"><b>Definition:</b> <a href="_file_packager_impl_8java_source.html#l00054">FilePackagerImpl.java:54</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type_html_a92c764fa1e72fb1a880999a24f0ab4a8"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html#a92c764fa1e72fb1a880999a24f0ab4a8">org.tdl.vireo.model.AttachmentType.ACTIONLOG</a></div><div class="ttdeci">ACTIONLOG</div><div class="ttdef"><b>Definition:</b> <a href="_attachment_type_8java_source.html#l00017">AttachmentType.java:17</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_html_a27ebe37a40274409e3e97a4dccbf84b7"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a27ebe37a40274409e3e97a4dccbf84b7">org.tdl.vireo.export.impl.FilePackagerImpl.attachmentTypes</a></div><div class="ttdeci">List&lt; AttachmentType &gt; attachmentTypes</div><div class="ttdef"><b>Definition:</b> <a href="_file_packager_impl_8java_source.html#l00052">FilePackagerImpl.java:52</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_html_a2db4a794609001cce3e809bf622e583c"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a2db4a794609001cce3e809bf622e583c">org.tdl.vireo.export.impl.FilePackagerImpl.attachmentAttributes</a></div><div class="ttdeci">LinkedHashMap&lt; String, Properties &gt; attachmentAttributes</div><div class="ttdef"><b>Definition:</b> <a href="_file_packager_impl_8java_source.html#l00053">FilePackagerImpl.java:53</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_html_ac0c5ebf534069ffa6fadc678c37200b0"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#ac0c5ebf534069ffa6fadc678c37200b0">org.tdl.vireo.export.impl.FilePackagerImpl.packageType</a></div><div class="ttdeci">String packageType</div><div class="ttdef"><b>Definition:</b> <a href="_file_packager_impl_8java_source.html#l00055">FilePackagerImpl.java:55</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_aa52ede47d99b5e1cb7e31289ad865fae_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_aa52ede47d99b5e1cb7e31289ad865fae_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_aa52ede47d99b5e1cb7e31289ad865fae_cgraph" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_aa52ede47d99b5e1cb7e31289ad865fae_cgraph">
<area shape="rect" id="node2" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_abstract_model.html#adf9b6814dd10bc0848d4f17341c6e7b1" title="org.tdl.vireo.model.Abstract\lModel.getId" alt="" coords="283,5,466,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acd941d6d5962e8e00c5a2c9a3970fcaf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String org.tdl.vireo.export.impl.FilePackagerImpl.getExportServiceBeanName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The technical spring bean name of this packager's <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_export_service.html">ExportService</a> implementation. </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1export_1_1_packager.html#a74f53c7086ed05ae03599c39e93a0d59">org.tdl.vireo.export.Packager</a>.</p>

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00105">105</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                             {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;ExportService&quot;</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f4507a0d5bc9f9e4a42a5ca89704a37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.export.impl.FilePackagerImpl.setAttachmentTypeNames </td>
          <td>(</td>
          <td class="paramtype">LinkedHashMap&lt; String, Properties &gt;&#160;</td>
          <td class="paramname"><em>attachmentTypeNames</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(OPITONAL) Set the attachment types which will be included in the package. Since not all attachments should be deposited, this allows the package to filter which files to include. They must be the exact name (all uppercase) of types listed in the AttachmentType enum.</p>
<p>If no types are specified then no attachments will be included.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">attachmentTypeNames</td><td>List of attachment types to include. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00068">68</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                                                                              {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        this.attachmentTypes = <span class="keyword">new</span> ArrayList&lt;AttachmentType&gt;();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        this.attachmentAttributes = <span class="keyword">new</span> LinkedHashMap&lt;String, Properties&gt;();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">if</span> (attachmentTypeNames != null ) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            this.attachmentAttributes = attachmentTypeNames;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">for</span> (String name : attachmentTypeNames.keySet()) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                AttachmentType type = AttachmentType.valueOf(name);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                this.attachmentTypes.add(type);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5401e7c29586ed175b3ebf30b2ab0721"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.export.impl.FilePackagerImpl.setEntryName </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>entryName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(OPTIONAL) Set the name of the entry. The default will be submission_{submission ID}, but this can be customized in application-context.xml.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entryName</td><td>The name of the entry. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00090">90</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>References <a class="el" href="_file_packager_impl_8java_source.html#l00054">org.tdl.vireo.export.impl.FilePackagerImpl.entryName</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                               {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        this.entryName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">entryName</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_html_a58dfc78d2c2f8ab13d199441ea0d20af"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#a58dfc78d2c2f8ab13d199441ea0d20af">org.tdl.vireo.export.impl.FilePackagerImpl.entryName</a></div><div class="ttdeci">String entryName</div><div class="ttdef"><b>Definition:</b> <a href="_file_packager_impl_8java_source.html#l00054">FilePackagerImpl.java:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53e2085bec74f562f2f8a50b98b9da91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.export.impl.FilePackagerImpl.setPackageType </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>packageType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>(OPTIONAL) Inject the package type for the export.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packageType</td><td>Package Type (directory, zip, etc) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00100">100</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>References <a class="el" href="_file_packager_impl_8java_source.html#l00055">org.tdl.vireo.export.impl.FilePackagerImpl.packageType</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                                   {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        this.packageType = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#ac0c5ebf534069ffa6fadc678c37200b0">packageType</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl_html_ac0c5ebf534069ffa6fadc678c37200b0"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html#ac0c5ebf534069ffa6fadc678c37200b0">org.tdl.vireo.export.impl.FilePackagerImpl.packageType</a></div><div class="ttdeci">String packageType</div><div class="ttdef"><b>Definition:</b> <a href="_file_packager_impl_8java_source.html#l00055">FilePackagerImpl.java:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a2db4a794609001cce3e809bf622e583c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LinkedHashMap&lt;String, Properties&gt; org.tdl.vireo.export.impl.FilePackagerImpl.attachmentAttributes = new LinkedHashMap&lt;String, Properties&gt;()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00053">53</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_file_packager_impl_8java_source.html#l00110">org.tdl.vireo.export.impl.FilePackagerImpl.generatePackage()</a>.</p>

</div>
</div>
<a class="anchor" id="a27ebe37a40274409e3e97a4dccbf84b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;<a class="el" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html">AttachmentType</a>&gt; org.tdl.vireo.export.impl.FilePackagerImpl.attachmentTypes = new ArrayList&lt;<a class="el" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_attachment_type.html">AttachmentType</a>&gt;()</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00052">52</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_file_packager_impl_8java_source.html#l00110">org.tdl.vireo.export.impl.FilePackagerImpl.generatePackage()</a>.</p>

</div>
</div>
<a class="anchor" id="a58dfc78d2c2f8ab13d199441ea0d20af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String org.tdl.vireo.export.impl.FilePackagerImpl.entryName</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00054">54</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_file_packager_impl_8java_source.html#l00110">org.tdl.vireo.export.impl.FilePackagerImpl.generatePackage()</a>, and <a class="el" href="_file_packager_impl_8java_source.html#l00090">org.tdl.vireo.export.impl.FilePackagerImpl.setEntryName()</a>.</p>

</div>
</div>
<a class="anchor" id="ac0c5ebf534069ffa6fadc678c37200b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String org.tdl.vireo.export.impl.FilePackagerImpl.packageType = &quot;dir&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_file_packager_impl_8java_source.html#l00055">55</a> of file <a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_file_packager_impl_8java_source.html#l00110">org.tdl.vireo.export.impl.FilePackagerImpl.generatePackage()</a>, and <a class="el" href="_file_packager_impl_8java_source.html#l00100">org.tdl.vireo.export.impl.FilePackagerImpl.setPackageType()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>app/org/tdl/vireo/export/impl/<a class="el" href="_file_packager_impl_8java_source.html">FilePackagerImpl.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceorg.html">org</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl.html">tdl</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo.html">vireo</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1export.html">export</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1export_1_1impl.html">impl</a></li><li class="navelem"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1export_1_1impl_1_1_file_packager_impl.html">FilePackagerImpl</a></li>
    <li class="footer">Generated on Wed Dec 3 2014 12:37:02 for Vireo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
