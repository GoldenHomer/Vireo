<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Vireo: app/org/tdl/vireo/security/impl/ShibbolethAuthenticationMethodImpl.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">3.0.x-RC</span>
   </div>
   <div id="projectbrief">Vireo Electronic Thesis and Dissertation Submission System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_shibboleth_authentication_method_impl_8java_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ShibbolethAuthenticationMethodImpl.java</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_shibboleth_authentication_method_impl_8java.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">package </span>org.tdl.vireo.security.impl;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> java.net.URLEncoder;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> java.util.ArrayList;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">import</span> java.util.HashMap;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">import</span> java.util.List;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> java.util.Map;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> <a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html">org.tdl.vireo.model.Person</a>;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_role_type.html">org.tdl.vireo.model.RoleType</a>;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> <a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method.html">org.tdl.vireo.security.AuthenticationMethod</a>;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html">org.tdl.vireo.security.AuthenticationResult</a>;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">import</span> play.Logger;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> play.Play;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> play.Play.Mode;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">import</span> play.mvc.Http.Header;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> play.mvc.Http.Request;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">import</span> play.mvc.Router.ActionDefinition;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html">   29</a></span>&#160;<span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html">ShibbolethAuthenticationMethodImpl</a> <span class="keyword">extends</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl.html">AbstractAuthenticationMethodImpl</a>.<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl_1_1_abstracc9c94446c8831ec7f0b78eba6ed6f5b2.html">AbstractImplicitAuthenticationMethod</a> implements <a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method.html">AuthenticationMethod</a>.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method_1_1_implicit.html">Implicit</a> {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">/* Injected configuration */</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// Whether shibboleth will be mocked or real.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// In order to remotely debug, Play must be in dev mode.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// Therefore, if we want to debug shibboleth authentication, </span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// we will need another configuration setting to separate mode from mock.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">   38</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">mock</a> = (Play.configuration.getProperty(<span class="stringliteral">&quot;auth.shib.mock&quot;</span>).equals(<span class="stringliteral">&quot;true&quot;</span>) || Play.mode == Mode.DEV);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// flag to allow logging Shibboleth, independent of other logging</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aeff21ddcb3aceaa384e09b43049e1db0">   41</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aeff21ddcb3aceaa384e09b43049e1db0">logShib</a> = Play.configuration.getProperty(<span class="stringliteral">&quot;auth.shib.log&quot;</span>).equals(<span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">// The location to start a shibboleth session.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#acd4c3407eb3c18886f620b5af348afcd">   44</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#acd4c3407eb3c18886f620b5af348afcd">loginURL</a> = <span class="stringliteral">&quot;/Shibboleth.sso/Login?target=%1s&quot;</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aca370d6fbfd2ce36eb35ea03db6644e5">   45</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aca370d6fbfd2ce36eb35ea03db6644e5">logoutURL</a> = <span class="stringliteral">&quot;/Shibboleth.sso/Logout?return=%1s&quot;</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// Force the login URL to use SSL</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a92491d1ccbbf780e21818dd99e0b30a9">   48</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a92491d1ccbbf780e21818dd99e0b30a9">loginForceSSL</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// Use netid or email adress as primary account identifier.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">   51</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">useNetIdAsIdentifier</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// Weather logout is enabled.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#af0704fc1d3b9c90fa9c51647f985bd3a">   54</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#af0704fc1d3b9c90fa9c51647f985bd3a">logoutEnabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// All the header names.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">   57</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a> = <span class="stringliteral">&quot;SHIB_netid&quot;</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">   58</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a> = <span class="stringliteral">&quot;SHIB_mail&quot;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aae3934839827933bc6ed3289ff4e19b2">   59</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aae3934839827933bc6ed3289ff4e19b2">headerInstitutionalIdentifier</a> = <span class="stringliteral">&quot;SHIB_uin&quot;</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">   60</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a> = <span class="stringliteral">&quot;SHIB_givenname&quot;</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa5b8d6602a731ca61e14d1187c93c91c">   61</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa5b8d6602a731ca61e14d1187c93c91c">headerMiddleName</a> = <span class="stringliteral">&quot;SHIB_initials&quot;</span>; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">   62</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a> = <span class="stringliteral">&quot;SHIB_sn&quot;</span>; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">   63</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">headerBirthYear</a> = <span class="stringliteral">&quot;SHIB_dateOfBirth&quot;</span>; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0b48ae90bb5f474e9ca226d5cf8e5327">   64</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0b48ae90bb5f474e9ca226d5cf8e5327">headerAffiliations</a> = <span class="stringliteral">&quot;SHIB_eduPersonAffilation&quot;</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a857ae23c99008ba83efa3510a9050cea">   65</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a857ae23c99008ba83efa3510a9050cea">headerCurrentPhoneNumber</a> = <span class="stringliteral">&quot;SHIB_phone&quot;</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a884eaca5147bc25d233fc106f42e8700">   66</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a884eaca5147bc25d233fc106f42e8700">headerCurrentPostalAddress</a> = <span class="stringliteral">&quot;SHIB_postal&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a503611b79a70bbb618f51f42b45145b7">   67</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a503611b79a70bbb618f51f42b45145b7">headerCurrentEmailAddress</a> = <span class="stringliteral">&quot;SHIB_mail&quot;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa30124becacd4dfd8fa77f6bc9226feb">   68</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa30124becacd4dfd8fa77f6bc9226feb">headerPermanentPhoneNumber</a> = <span class="stringliteral">&quot;SHIB_permanentPhone&quot;</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab32f42bf90d466d5e1fad65935bf52f8">   69</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab32f42bf90d466d5e1fad65935bf52f8">headerPermanentPostalAddress</a> = <span class="stringliteral">&quot;SHIB_permanentPostal&quot;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a496f3adb55a5efb8d8cf6b510e850f3e">   70</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a496f3adb55a5efb8d8cf6b510e850f3e">headerPermanentEmailAddress</a> = <span class="stringliteral">&quot;SHIB_permanentMail&quot;</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a58c9b66b4015b0850852e8a2c3ee6fa2">   71</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a58c9b66b4015b0850852e8a2c3ee6fa2">headerCurrentDegree</a> = <span class="stringliteral">&quot;SHIB_degree&quot;</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a50f3175717debca501d752995a4121b1">   72</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a50f3175717debca501d752995a4121b1">headerCurrentDepartment</a> = <span class="stringliteral">&quot;SHIB_department&quot;</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a30193fc743365312f4843734791fdeca">   73</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a30193fc743365312f4843734791fdeca">headerCurrentCollege</a> = <span class="stringliteral">&quot;SHIB_college&quot;</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a2b38ce53e25f6204318893790c753ff0">   74</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a2b38ce53e25f6204318893790c753ff0">headerCurrentMajor</a> = <span class="stringliteral">&quot;SHIB_major&quot;</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">   75</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">headerCurrentGraduationYear</a> = <span class="stringliteral">&quot;SHIB_gradYear&quot;</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">   76</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">headerCurrentGraduationMonth</a> = <span class="stringliteral">&quot;SHIB_gradMonth&quot;</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a3e37339fea26aca5954a2fda4371e42d">   77</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a3e37339fea26aca5954a2fda4371e42d">headerOrcid</a> = <span class="stringliteral">&quot;SHIB_orcid&quot;</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// Map of mock shibboleth attributes</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a399235b88ab851053af39a8bcb69a5d4">   80</a></span>&#160;    <span class="keyword">public</span> Map&lt;String,String&gt; <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a399235b88ab851053af39a8bcb69a5d4">mockAttributes</a> = <span class="keyword">new</span> HashMap&lt;String,String&gt;();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a66ad6efcce203c5fe654bc7a7d8efa94">   91</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a66ad6efcce203c5fe654bc7a7d8efa94">setLoginForceSSL</a>(<span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a92491d1ccbbf780e21818dd99e0b30a9">loginForceSSL</a>) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        this.loginForceSSL = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a92491d1ccbbf780e21818dd99e0b30a9">loginForceSSL</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae2452608ed713b99e6f353ed9b941730">  105</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae2452608ed713b99e6f353ed9b941730">setLoginURL</a>(String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#acd4c3407eb3c18886f620b5af348afcd">loginURL</a>) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        this.loginURL = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#acd4c3407eb3c18886f620b5af348afcd">loginURL</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    </div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0540411357d7324a427bb794785139b3">  120</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0540411357d7324a427bb794785139b3">setLogoutURL</a>(String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aca370d6fbfd2ce36eb35ea03db6644e5">logoutURL</a>) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        this.logoutURL = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aca370d6fbfd2ce36eb35ea03db6644e5">logoutURL</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    </div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab82af9397bf844037af27134656742b3">  130</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab82af9397bf844037af27134656742b3">setMock</a>(<span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">mock</a>) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        this.mock = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">mock</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    </div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a4c154a34b1e8134c529f722835579af6">  146</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a4c154a34b1e8134c529f722835579af6">setMockAttributes</a>(Map&lt;String,String&gt; <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a399235b88ab851053af39a8bcb69a5d4">mockAttributes</a>) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        this.mockAttributes = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a399235b88ab851053af39a8bcb69a5d4">mockAttributes</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    </div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a05351cc1eccbdb82d5a18f71bb1aa2da">  158</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a05351cc1eccbdb82d5a18f71bb1aa2da">setPrimaryIdentifier</a>(String primaryIdentifier) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (<span class="stringliteral">&quot;netid&quot;</span>.equals(primaryIdentifier)) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">useNetIdAsIdentifier</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;email&quot;</span>.equals(primaryIdentifier)) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">useNetIdAsIdentifier</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Invalid primary identifier: &quot;</span>+primaryIdentifier+<span class="stringliteral">&quot;, the only valid options are &#39;netid&#39; or &#39;email&#39;.&quot;</span>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a48d9fb902545927fbc07df3eed195575">  175</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a48d9fb902545927fbc07df3eed195575">setLogoutEnabled</a>(<span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl.html#a1f05f32bc781d337f7bbc4903b83f6ba">enabled</a>) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        this.logoutEnabled = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl.html#a1f05f32bc781d337f7bbc4903b83f6ba">enabled</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    </div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ad20cefb14b0d609d289cef16c984d921">  197</a></span>&#160;    <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ad20cefb14b0d609d289cef16c984d921">setAttributeMap</a>(Map&lt;String,String&gt; attributeMap) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// Check for required mappings</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a> = attributeMap.get(<span class="stringliteral">&quot;netId&quot;</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a> = attributeMap.get(<span class="stringliteral">&quot;email&quot;</span>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a> = attributeMap.get(<span class="stringliteral">&quot;firstName&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a> = attributeMap.get(<span class="stringliteral">&quot;lastName&quot;</span>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> (headerEmail == null || headerFirstName == null || headerLastName == null) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="stringliteral">&quot;Missing required attributes in the provided attributeMap.&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">// Store all the optional attributes.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aae3934839827933bc6ed3289ff4e19b2">headerInstitutionalIdentifier</a> = attributeMap.get(<span class="stringliteral">&quot;institutionalIdentifier&quot;</span>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa5b8d6602a731ca61e14d1187c93c91c">headerMiddleName</a> = attributeMap.get(<span class="stringliteral">&quot;middleName&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">headerBirthYear</a> = attributeMap.get(<span class="stringliteral">&quot;birthYear&quot;</span>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0b48ae90bb5f474e9ca226d5cf8e5327">headerAffiliations</a> = attributeMap.get(<span class="stringliteral">&quot;affiliations&quot;</span>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a857ae23c99008ba83efa3510a9050cea">headerCurrentPhoneNumber</a> = attributeMap.get(<span class="stringliteral">&quot;currentPhoneNumber&quot;</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a884eaca5147bc25d233fc106f42e8700">headerCurrentPostalAddress</a> = attributeMap.get(<span class="stringliteral">&quot;currentPostalAddress&quot;</span>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a503611b79a70bbb618f51f42b45145b7">headerCurrentEmailAddress</a> = attributeMap.get(<span class="stringliteral">&quot;currentEmailAddress&quot;</span>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa30124becacd4dfd8fa77f6bc9226feb">headerPermanentPhoneNumber</a> = attributeMap.get(<span class="stringliteral">&quot;permanentPhoneNumber&quot;</span>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab32f42bf90d466d5e1fad65935bf52f8">headerPermanentPostalAddress</a> = attributeMap.get(<span class="stringliteral">&quot;permanentPostalAddress&quot;</span>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a496f3adb55a5efb8d8cf6b510e850f3e">headerPermanentEmailAddress</a> = attributeMap.get(<span class="stringliteral">&quot;permanentEmailAddress&quot;</span>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a58c9b66b4015b0850852e8a2c3ee6fa2">headerCurrentDegree</a> = attributeMap.get(<span class="stringliteral">&quot;currentDegree&quot;</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a50f3175717debca501d752995a4121b1">headerCurrentDepartment</a> = attributeMap.get(<span class="stringliteral">&quot;currentDepartment&quot;</span>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a30193fc743365312f4843734791fdeca">headerCurrentCollege</a> = attributeMap.get(<span class="stringliteral">&quot;currentCollege&quot;</span>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a2b38ce53e25f6204318893790c753ff0">headerCurrentMajor</a> = attributeMap.get(<span class="stringliteral">&quot;currentMajor&quot;</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">headerCurrentGraduationYear</a> = attributeMap.get(<span class="stringliteral">&quot;currentGraduationYear&quot;</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">headerCurrentGraduationMonth</a> = attributeMap.get(<span class="stringliteral">&quot;currentGraduationMonth&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a3e37339fea26aca5954a2fda4371e42d">headerOrcid</a> = attributeMap.get(<span class="stringliteral">&quot;orcid&quot;</span>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    @Override</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a16a48294b00ce7a44d8ba3c4afee7b8a">  231</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a16a48294b00ce7a44d8ba3c4afee7b8a">startAuthentication</a>(Request request, ActionDefinition returnAction) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">// If we are mocking a shibboleth connection then we can proceed straight to authentication.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">mock</a>)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        String returnURL = returnAction.url;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a92491d1ccbbf780e21818dd99e0b30a9">loginForceSSL</a>) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            returnAction.absolute();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            returnURL = returnAction.url;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordflow">if</span> (returnURL.startsWith(<span class="stringliteral">&quot;http://&quot;</span>)) </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                returnURL = <span class="stringliteral">&quot;https://&quot;</span>+returnURL.substring(7);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">// Generate the URL to initiate a shibboleth session</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        String encodedReturnURL = URLEncoder.encode(returnURL);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        String completeLoginURL = String.format(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#acd4c3407eb3c18886f620b5af348afcd">loginURL</a>,encodedReturnURL);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> completeLoginURL;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    @Override</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a81143e5bafe3220c04698c5a9e85c78b">  253</a></span>&#160;    <span class="keyword">public</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html">AuthenticationResult</a> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a81143e5bafe3220c04698c5a9e85c78b">authenticate</a>(Request request) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">// 1. Log all headers received, if tracing (it fills up the logs fast!)</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">if</span> (Logger.isTraceEnabled() || <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aeff21ddcb3aceaa384e09b43049e1db0">logShib</a>) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            String log = <span class="stringliteral">&quot;Shib: Recieved the following headers: \n&quot;</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">if</span>(request != null) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="keywordflow">for</span> (String name : request.headers.keySet()) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    <span class="keywordflow">for</span> (String value : request.headers.get(name).values) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                        log += <span class="stringliteral">&quot;    &#39;&quot;</span> + name + <span class="stringliteral">&quot;&#39; = &#39;&quot;</span> + value + <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                log += <span class="stringliteral">&quot;NONE!&quot;</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// save configured level</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            String configuredLogLevel = Play.configuration.getProperty(<span class="stringliteral">&quot;application.log&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">//only override log-level if:</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// 1) Logger is not already at TRACE level</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">// 2) Logger was not configured manually</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="comment">// and</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="comment">// 3) we can put it back</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span>(!Logger.isTraceEnabled() &amp;&amp; !Logger.configuredManually &amp;&amp; !configuredLogLevel.isEmpty()) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                Logger.setUp(<span class="stringliteral">&quot;TRACE&quot;</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                configuredLogLevel = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">if</span> (Logger.isTraceEnabled()) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                Logger.trace(log);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="comment">// if we overrode the log-level, put it back</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">if</span>(!configuredLogLevel.isEmpty()) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="comment">// restore configured level</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                Logger.setUp(configuredLogLevel);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="comment">// 2. Get required attributes.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        String netid = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        String email = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        String firstName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        String lastName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a>);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">useNetIdAsIdentifier</a> &amp;&amp; netid == null) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            Logger.error(<span class="stringliteral">&quot;Shib: Missing required NetId attributes because netid is the primary account identifier. Netid attribute header = %1s.&quot;</span>, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#ad2409d3bc61fe0c76ca7b0ef6bcc440b">AuthenticationResult.MISSING_CREDENTIALS</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">if</span> (email == null ) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            Logger.error(<span class="stringliteral">&quot;Shib: Missing required email address attributes. Email address attribute header = %1s.&quot;</span>, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#ad2409d3bc61fe0c76ca7b0ef6bcc440b">AuthenticationResult.MISSING_CREDENTIALS</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> (firstName == null &amp;&amp; lastName == null) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            Logger.error(<span class="stringliteral">&quot;Shib: Missing required first and last name attributes. First Name attribute header = %1s, Last Name attribute header = %2s&quot;</span>, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a>, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#ad2409d3bc61fe0c76ca7b0ef6bcc440b">AuthenticationResult.MISSING_CREDENTIALS</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">// 3. Lookup the person based upon the primary identifier</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html">Person</a> person;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            context.turnOffAuthorization();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">useNetIdAsIdentifier</a>) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                person = personRepo.findPersonByNetId(netid);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                person = personRepo.findPersonByEmail(email);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span> (person == null) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="comment">// Create the new person</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    person = personRepo.createPerson(netid, email, firstName, lastName, <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_role_type.html#abd3ec6bc08a143d0203b27b080b66738">RoleType.STUDENT</a>).save();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                } <span class="keywordflow">catch</span> (RuntimeException re) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    <span class="comment">// Unable to create new person, probably because the email or netid already exist.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    Logger.error(re,<span class="stringliteral">&quot;Shib: Unable to create new eperson.&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#a89911941d9f1ebd8490e05911000ccd7">AuthenticationResult.BAD_CREDENTIALS</a>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="comment">// Update required fields.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">if</span> (netid != null)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    person.setNetId(netid);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                person.setEmail(email);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                person.setFirstName(firstName);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                person.setLastName(lastName);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="comment">// 4. Update Optional attributes:</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aae3934839827933bc6ed3289ff4e19b2">headerInstitutionalIdentifier</a> != null) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                String identifier = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aae3934839827933bc6ed3289ff4e19b2">headerInstitutionalIdentifier</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(identifier))</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    person.setInstitutionalIdentifier(identifier);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa5b8d6602a731ca61e14d1187c93c91c">headerMiddleName</a> != null) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                String middleName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa5b8d6602a731ca61e14d1187c93c91c">headerMiddleName</a>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(middleName) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0be1298e441f9a99abd909c385ca295e">getMiddleName</a>() == null)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ab5a96ce85269d959f1bee2748fafe8f7">setMiddleName</a>(middleName);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">headerBirthYear</a> != null) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                String birthYearString = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">headerBirthYear</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(birthYearString) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a6674aa143335ab5bdd3d2a95b0c5a63d">getBirthYear</a>() == null) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        Integer birthYear = Integer.valueOf(birthYearString);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        person.setBirthYear(birthYear);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                    } <span class="keywordflow">catch</span> (NumberFormatException nfe) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        Logger.warn(<span class="stringliteral">&quot;Shib: Unable to interpret birth year attribute &#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">headerBirthYear</a>+<span class="stringliteral">&quot;&#39;=&#39;&quot;</span>+birthYearString+<span class="stringliteral">&quot;&#39; as an integer.&quot;</span>);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0b48ae90bb5f474e9ca226d5cf8e5327">headerAffiliations</a> != null) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                List&lt;String&gt; affiliations = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aafc8bcb2ff8cc9e395384faf362fce37">getAttributes</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0b48ae90bb5f474e9ca226d5cf8e5327">headerAffiliations</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">if</span> (affiliations != null &amp;&amp; affiliations.size() &gt; 0) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    person.getAffiliations().clear();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                    <span class="keywordflow">if</span> (affiliations != null)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                        person.getAffiliations().addAll(affiliations);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a857ae23c99008ba83efa3510a9050cea">headerCurrentPhoneNumber</a> != null) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                String currentPhoneNumber = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a857ae23c99008ba83efa3510a9050cea">headerCurrentPhoneNumber</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentPhoneNumber) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ab5bbdbf4213ddc5e64b3e91bfe770f38">getCurrentPhoneNumber</a>() == null)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0ac414c7f88020e91a695aabad9f3083">setCurrentPhoneNumber</a>(currentPhoneNumber);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a884eaca5147bc25d233fc106f42e8700">headerCurrentPostalAddress</a> != null) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                String currentPostalAddress = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a884eaca5147bc25d233fc106f42e8700">headerCurrentPostalAddress</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentPostalAddress) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a946a5c2d2689b7ec08292446ee8e8213">getCurrentPostalAddress</a>() == null) </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a5356bcac6675aa5f2cfa0dbab6474337">setCurrentPostalAddress</a>(currentPostalAddress);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a503611b79a70bbb618f51f42b45145b7">headerCurrentEmailAddress</a> != null) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                String currentEmailAddress = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a503611b79a70bbb618f51f42b45145b7">headerCurrentEmailAddress</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentEmailAddress) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ab3b428bf8e0dbda1a264fffcdc087f57">getCurrentEmailAddress</a>() == null)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a2ce0f8297bc11a76520b18be7f73b325">setCurrentEmailAddress</a>(currentEmailAddress);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa30124becacd4dfd8fa77f6bc9226feb">headerPermanentPhoneNumber</a> != null) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                String permanentPhoneNumber = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa30124becacd4dfd8fa77f6bc9226feb">headerPermanentPhoneNumber</a>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(permanentPhoneNumber) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#abb6bdc9bccf1e0930597eeb34887e193">getPermanentPhoneNumber</a>() == null)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#afe8b0f6cb043686e5990dc7b92dbeec8">setPermanentPhoneNumber</a>(permanentPhoneNumber);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab32f42bf90d466d5e1fad65935bf52f8">headerPermanentPostalAddress</a> != null) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                String permanentPostalAddress = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab32f42bf90d466d5e1fad65935bf52f8">headerPermanentPostalAddress</a>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(permanentPostalAddress) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0946389781924307bc0ca27dc123e9ad">getPermanentPostalAddress</a>() == null)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aafe011d3cdc10575349d8ae34b4f89f1">setPermanentPostalAddress</a>(permanentPostalAddress);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a496f3adb55a5efb8d8cf6b510e850f3e">headerPermanentEmailAddress</a> != null) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                String permanentEmailAddress = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a496f3adb55a5efb8d8cf6b510e850f3e">headerPermanentEmailAddress</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(permanentEmailAddress) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0597e4bd38e23cb7cae3e1075703af5c">getPermanentEmailAddress</a>() == null)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#afb4427834db57f31b6a4637cf7a9c976">setPermanentEmailAddress</a>(permanentEmailAddress);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a58c9b66b4015b0850852e8a2c3ee6fa2">headerCurrentDegree</a> != null) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                String currentDegree = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a58c9b66b4015b0850852e8a2c3ee6fa2">headerCurrentDegree</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentDegree) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a5e4d9f14cd33032d9b2e1c2bc5289067">getCurrentDegree</a>() == null)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a2013cbf05ee35969cc829d38890a2541">setCurrentDegree</a>(currentDegree);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a50f3175717debca501d752995a4121b1">headerCurrentDepartment</a> != null) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                String currentDepartment = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a50f3175717debca501d752995a4121b1">headerCurrentDepartment</a>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentDepartment) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aa69715eaf4fdf1543f69bb0235c62230">getCurrentDepartment</a>() == null)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a3b4d9f56ab218fe59d22dbb297b0f2f3">setCurrentDepartment</a>(currentDepartment);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a30193fc743365312f4843734791fdeca">headerCurrentCollege</a> != null) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                String currentCollege = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a30193fc743365312f4843734791fdeca">headerCurrentCollege</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentCollege) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a5daa523234af48d1f628c45ad1ef889c">getCurrentCollege</a>() == null)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#afabfd9f70057bb9389c944dcee03db5c">setCurrentCollege</a>(currentCollege);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a2b38ce53e25f6204318893790c753ff0">headerCurrentMajor</a> != null) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                String currentMajor = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a2b38ce53e25f6204318893790c753ff0">headerCurrentMajor</a>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentMajor) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aba471660f91855dd7c10fa869c3cb3e0">getCurrentMajor</a>() == null)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0e1e447473a8b77076b55ad209f41bb8">setCurrentMajor</a>(currentMajor);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">headerCurrentGraduationYear</a> != null) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                String currentGraduationYearString = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">headerCurrentGraduationYear</a>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentGraduationYearString) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ae18cf215260bd36b545562e98266197a">getCurrentGraduationYear</a>() == null) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                        Integer currentGraduationYear = Integer.valueOf(currentGraduationYearString);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                        person.setCurrentGraduationYear(currentGraduationYear);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                    } <span class="keywordflow">catch</span> (NumberFormatException nfe) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        Logger.warn(<span class="stringliteral">&quot;Shib: Unable to interpret current graduation year attribute &#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">headerCurrentGraduationYear</a>+<span class="stringliteral">&quot;&#39;=&#39;&quot;</span>+currentGraduationYearString+<span class="stringliteral">&quot;&#39; as an integer.&quot;</span>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">headerCurrentGraduationMonth</a> != null) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                String currentGraduationMonthString = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">headerCurrentGraduationMonth</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(currentGraduationMonthString) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a34b97af421dea46b2dd6a03093de56c8">getCurrentGraduationMonth</a>() == null) {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                        Integer currentGraduationMonth = Integer.valueOf(currentGraduationMonthString);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        person.setCurrentGraduationMonth(currentGraduationMonth);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    } <span class="keywordflow">catch</span> (NumberFormatException nfe) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                        Logger.warn(<span class="stringliteral">&quot;Shib: Unable to interpret current graduation month attribute &#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">headerCurrentGraduationMonth</a>+<span class="stringliteral">&quot;&#39;=&#39;&quot;</span>+currentGraduationMonthString+<span class="stringliteral">&quot;&#39; as an integer.&quot;</span>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    } <span class="keywordflow">catch</span> (IllegalArgumentException iae) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                        Logger.warn(<span class="stringliteral">&quot;Shib: Illegal value for current graduation month attribute &#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">headerCurrentGraduationMonth</a>+<span class="stringliteral">&quot;&#39;=&#39;&quot;</span>+currentGraduationMonthString+<span class="stringliteral">&quot;&#39;, 0=January, 11=Dember. Any values outside this range are illegal.&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a3e37339fea26aca5954a2fda4371e42d">headerOrcid</a> != null) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                String orcidString = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a3e37339fea26aca5954a2fda4371e42d">headerOrcid</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(orcidString) &amp;&amp; person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aa2263b12eee55b8a2f2f775203f61747">getOrcid</a>() == null)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    person.<a class="code" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0d2a3862dee158d7671c5611cd96f789">setOrcid</a>(orcidString);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            person.save();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        } <span class="keywordflow">finally</span> {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            context.restoreAuthorization();</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        context.login(person);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#ad4548d6c1b10d4891ec0e9e2b122b869">AuthenticationResult.SUCCESSFULL</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    @Override</div>
<div class="line"><a name="l00460"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a294c1a3c95f5c3291a66a26f273120d6">  460</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a294c1a3c95f5c3291a66a26f273120d6">getFailureMessage</a>(Request request, <a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html">AuthenticationResult</a> result) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        StringBuilder msg = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html">AuthenticationResult</a>.<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#a89911941d9f1ebd8490e05911000ccd7">BAD_CREDENTIALS</a> == result ) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;p&gt;Shibboleth authentication recieved the required attributes but was unable to create a new account. The most likely cause is because an account with the same netid or email already exists in the system.&lt;/p&gt;&quot;</span>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;p&gt;Shibboleth authentication failed because it did not recieve enough information from your Shibboleth Identity Provider. Vireo requires four attributes Netid, Email, and your First and Last name. If any of these are missing then authentication will fail. Below is a listing of the attributes we did recieve:&lt;/p&gt;&quot;</span>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;dl class=\&quot;dl-horizontal\&quot;&gt;&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;dt&gt;NetId:&lt;/dt&gt;&quot;</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        String netid = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (netid != null)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a>+<span class="stringliteral">&quot;&#39; = &#39;&quot;</span>+netid+<span class="stringliteral">&quot;&#39;&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">headerNetId</a>+<span class="stringliteral">&quot;&#39; = null&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;br/&gt;&quot;</span>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;dt&gt;Email Address:&lt;/dt&gt;&quot;</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        String email = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">if</span> (email != null)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a>+<span class="stringliteral">&quot;&#39; = &#39;&quot;</span>+email+<span class="stringliteral">&quot;&#39;&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">headerEmail</a>+<span class="stringliteral">&quot;&#39; = null&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;br/&gt;&quot;</span>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;dt&gt;First Name:&lt;/dt&gt;&quot;</span>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        String firstName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (firstName != null)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a>+<span class="stringliteral">&quot;&#39; = &#39;&quot;</span>+firstName+<span class="stringliteral">&quot;&#39;&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">headerFirstName</a>+<span class="stringliteral">&quot;&#39; = null&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;br/&gt;&quot;</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;dt&gt;Last Name:&lt;/dt&gt;&quot;</span>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        String lastName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(request, <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (lastName != null)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a>+<span class="stringliteral">&quot;&#39; = &#39;&quot;</span>+lastName+<span class="stringliteral">&quot;&#39;&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            msg.append(<span class="stringliteral">&quot;&lt;dd&gt;&lt;code&gt;&#39;&quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">headerLastName</a>+<span class="stringliteral">&quot;&#39; = null&lt;/code&gt;&lt;/dd&gt;&quot;</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;/dl&gt;&quot;</span>);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        msg.append(<span class="stringliteral">&quot;&lt;p&gt;Please contact your university Information Technology support at your local campus for trouble shooting this problem.&lt;/p&gt;&quot;</span>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">return</span> msg.toString();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    @Override</div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a1d46b5c30ceb906af369eb47a393260a">  510</a></span>&#160;    <span class="keyword">public</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a1d46b5c30ceb906af369eb47a393260a">logout</a>(Request request, String returnURL) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="comment">// If we are mocking a shibboleth connection we don&#39;t do a full shib logout.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">mock</a>)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// Is logout enabled?</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#af0704fc1d3b9c90fa9c51647f985bd3a">logoutEnabled</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// Generate the URL to initiate a shibboleth session</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        String encodedReturnURL = URLEncoder.encode(returnURL);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        String completeLoginoutURL = String.format(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aca370d6fbfd2ce36eb35ea03db6644e5">logoutURL</a>,encodedReturnURL);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span> completeLoginoutURL;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    }</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    </div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">  538</a></span>&#160;    <span class="keyword">protected</span> String <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">getSingleAttribute</a>(Request request, String attribute) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        List&lt;String&gt; attributes = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aafc8bcb2ff8cc9e395384faf362fce37">getAttributes</a>(request, attribute);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">if</span> (attributes == null || attributes.size() == 0)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">return</span> attributes.get(0);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    </div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aafc8bcb2ff8cc9e395384faf362fce37">  561</a></span>&#160;    <span class="keyword">protected</span> List&lt;String&gt; <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aafc8bcb2ff8cc9e395384faf362fce37">getAttributes</a>(Request request, String attribute) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">// Get the attribute header</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        String valueString = null;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">mock</a>) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            valueString = mockAttributes.get(attribute);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            Header header = request.headers.get(attribute);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">if</span> (header == null || header.values == null || header.values.size() == 0)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">if</span> (header.values.size() &gt; 1) </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                Logger.warn(<span class="stringliteral">&quot;Shib: Recieved multiple shibboleth attributes for &#39;&quot;</span> + attribute</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                        + <span class="stringliteral">&quot;&#39;. Using the first one and ignoring the rest.&quot;</span>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            valueString = header.value();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        } </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span> (valueString == null) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            Logger.warn(<span class="stringliteral">&quot;Shib: Recieved shibboleth attribute for &#39;&quot;</span> + attribute</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    + <span class="stringliteral">&quot;&#39; but the value was null.&quot;</span>);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">// Split the attribute into it&#39;s individual components. </span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        List&lt;String&gt; valueList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            idx = valueString.indexOf(<span class="charliteral">&#39;;&#39;</span>, idx);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            <span class="keywordflow">if</span> (idx == 0) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                <span class="comment">// if the string starts with a semicolon just remove it. This</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <span class="comment">// will</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="comment">// prevent an endless loop in an error condition.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                valueString = valueString.substring(1, valueString.length());</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            } </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="keywordflow">if</span> (idx &gt; 0 &amp;&amp; valueString.charAt(idx - 1) == <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                idx++;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            } </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (idx &gt; 0 ) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="comment">// First extract the value and store it on the list.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                String value = valueString.substring(0, idx);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                value = value.replaceAll(<span class="stringliteral">&quot;\\\\;&quot;</span>, <span class="stringliteral">&quot;;&quot;</span>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                valueList.add(value);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="comment">// Next, remove the value from the string and continue to scan.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                valueString = valueString.substring(idx + 1, valueString.length());</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                idx = 0;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            } </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        } <span class="keywordflow">while</span> (idx &gt;= 0);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="comment">// The last attribute will still be left on the values string, put it</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="comment">// into the list.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (valueString.length() &gt; 0) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            valueString = valueString.replaceAll(<span class="stringliteral">&quot;\\\\;&quot;</span>, <span class="stringliteral">&quot;;&quot;</span>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            valueList.add(valueString);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">return</span> valueList;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    </div>
<div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">  627</a></span>&#160;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">boolean</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">isEmpty</a>(String value) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">if</span> (value == null)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> (value.trim().length() == 0)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a05351cc1eccbdb82d5a18f71bb1aa2da"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a05351cc1eccbdb82d5a18f71bb1aa2da">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setPrimaryIdentifier</a></div><div class="ttdeci">void setPrimaryIdentifier(String primaryIdentifier)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00158">ShibbolethAuthenticationMethodImpl.java:158</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aaec3010ae1e45b25fbced1c797467f5e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aaec3010ae1e45b25fbced1c797467f5e">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentGraduationMonth</a></div><div class="ttdeci">String headerCurrentGraduationMonth</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00076">ShibbolethAuthenticationMethodImpl.java:76</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method_1_1_implicit_html"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method_1_1_implicit.html">org.tdl.vireo.security.AuthenticationMethod.Implicit</a></div><div class="ttdef"><b>Definition:</b> <a href="_authentication_method_8java_source.html#l00165">AuthenticationMethod.java:165</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a0540411357d7324a427bb794785139b3"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0540411357d7324a427bb794785139b3">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setLogoutURL</a></div><div class="ttdeci">void setLogoutURL(String logoutURL)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00120">ShibbolethAuthenticationMethodImpl.java:120</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aa7472dbb545166d0ecc6710e9efc522c"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa7472dbb545166d0ecc6710e9efc522c">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.getSingleAttribute</a></div><div class="ttdeci">String getSingleAttribute(Request request, String attribute)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00538">ShibbolethAuthenticationMethodImpl.java:538</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a496f3adb55a5efb8d8cf6b510e850f3e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a496f3adb55a5efb8d8cf6b510e850f3e">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerPermanentEmailAddress</a></div><div class="ttdeci">String headerPermanentEmailAddress</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00070">ShibbolethAuthenticationMethodImpl.java:70</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a884eaca5147bc25d233fc106f42e8700"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a884eaca5147bc25d233fc106f42e8700">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentPostalAddress</a></div><div class="ttdeci">String headerCurrentPostalAddress</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00066">ShibbolethAuthenticationMethodImpl.java:66</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result_html_a89911941d9f1ebd8490e05911000ccd7"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#a89911941d9f1ebd8490e05911000ccd7">org.tdl.vireo.security.AuthenticationResult.BAD_CREDENTIALS</a></div><div class="ttdeci">BAD_CREDENTIALS</div><div class="ttdef"><b>Definition:</b> <a href="_authentication_result_8java_source.html#l00025">AuthenticationResult.java:25</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1model_1_1_role_type_html_abd3ec6bc08a143d0203b27b080b66738"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_role_type.html#abd3ec6bc08a143d0203b27b080b66738">org.tdl.vireo.model.RoleType.STUDENT</a></div><div class="ttdeci">STUDENT</div><div class="ttdef"><b>Definition:</b> <a href="_role_type_8java_source.html#l00010">RoleType.java:10</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a0ac414c7f88020e91a695aabad9f3083"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0ac414c7f88020e91a695aabad9f3083">org.tdl.vireo.model.Person.setCurrentPhoneNumber</a></div><div class="ttdeci">void setCurrentPhoneNumber(String phoneNumber)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a57114d42595c15428e7e5c70c7a26250"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a57114d42595c15428e7e5c70c7a26250">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.useNetIdAsIdentifier</a></div><div class="ttdeci">boolean useNetIdAsIdentifier</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00051">ShibbolethAuthenticationMethodImpl.java:51</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a0d2a3862dee158d7671c5611cd96f789"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0d2a3862dee158d7671c5611cd96f789">org.tdl.vireo.model.Person.setOrcid</a></div><div class="ttdeci">void setOrcid(String orcid)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aeff21ddcb3aceaa384e09b43049e1db0"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aeff21ddcb3aceaa384e09b43049e1db0">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.logShib</a></div><div class="ttdeci">boolean logShib</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00041">ShibbolethAuthenticationMethodImpl.java:41</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a946a5c2d2689b7ec08292446ee8e8213"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a946a5c2d2689b7ec08292446ee8e8213">org.tdl.vireo.model.Person.getCurrentPostalAddress</a></div><div class="ttdeci">String getCurrentPostalAddress()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a0946389781924307bc0ca27dc123e9ad"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0946389781924307bc0ca27dc123e9ad">org.tdl.vireo.model.Person.getPermanentPostalAddress</a></div><div class="ttdeci">String getPermanentPostalAddress()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a92491d1ccbbf780e21818dd99e0b30a9"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a92491d1ccbbf780e21818dd99e0b30a9">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.loginForceSSL</a></div><div class="ttdeci">boolean loginForceSSL</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00048">ShibbolethAuthenticationMethodImpl.java:48</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a5e4d9f14cd33032d9b2e1c2bc5289067"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a5e4d9f14cd33032d9b2e1c2bc5289067">org.tdl.vireo.model.Person.getCurrentDegree</a></div><div class="ttdeci">String getCurrentDegree()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method_html"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_method.html">org.tdl.vireo.security.AuthenticationMethod</a></div><div class="ttdef"><b>Definition:</b> <a href="_authentication_method_8java_source.html#l00032">AuthenticationMethod.java:32</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a58c9b66b4015b0850852e8a2c3ee6fa2"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a58c9b66b4015b0850852e8a2c3ee6fa2">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentDegree</a></div><div class="ttdeci">String headerCurrentDegree</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00071">ShibbolethAuthenticationMethodImpl.java:71</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result_html_ad4548d6c1b10d4891ec0e9e2b122b869"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#ad4548d6c1b10d4891ec0e9e2b122b869">org.tdl.vireo.security.AuthenticationResult.SUCCESSFULL</a></div><div class="ttdeci">SUCCESSFULL</div><div class="ttdef"><b>Definition:</b> <a href="_authentication_result_8java_source.html#l00012">AuthenticationResult.java:12</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_ab5a96ce85269d959f1bee2748fafe8f7"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ab5a96ce85269d959f1bee2748fafe8f7">org.tdl.vireo.model.Person.setMiddleName</a></div><div class="ttdeci">void setMiddleName(String middleName)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aa30124becacd4dfd8fa77f6bc9226feb"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa30124becacd4dfd8fa77f6bc9226feb">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerPermanentPhoneNumber</a></div><div class="ttdeci">String headerPermanentPhoneNumber</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00068">ShibbolethAuthenticationMethodImpl.java:68</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result_html"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html">org.tdl.vireo.security.AuthenticationResult</a></div><div class="ttdef"><b>Definition:</b> <a href="_authentication_result_8java_source.html#l00009">AuthenticationResult.java:9</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1model_1_1_role_type_html"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_role_type.html">org.tdl.vireo.model.RoleType</a></div><div class="ttdef"><b>Definition:</b> <a href="_role_type_8java_source.html#l00008">RoleType.java:8</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a294c1a3c95f5c3291a66a26f273120d6"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a294c1a3c95f5c3291a66a26f273120d6">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.getFailureMessage</a></div><div class="ttdeci">String getFailureMessage(Request request, AuthenticationResult result)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00460">ShibbolethAuthenticationMethodImpl.java:460</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_aba471660f91855dd7c10fa869c3cb3e0"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aba471660f91855dd7c10fa869c3cb3e0">org.tdl.vireo.model.Person.getCurrentMajor</a></div><div class="ttdeci">String getCurrentMajor()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a2ce0f8297bc11a76520b18be7f73b325"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a2ce0f8297bc11a76520b18be7f73b325">org.tdl.vireo.model.Person.setCurrentEmailAddress</a></div><div class="ttdeci">void setCurrentEmailAddress(String email)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aca370d6fbfd2ce36eb35ea03db6644e5"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aca370d6fbfd2ce36eb35ea03db6644e5">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.logoutURL</a></div><div class="ttdeci">String logoutURL</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00045">ShibbolethAuthenticationMethodImpl.java:45</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a857ae23c99008ba83efa3510a9050cea"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a857ae23c99008ba83efa3510a9050cea">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentPhoneNumber</a></div><div class="ttdeci">String headerCurrentPhoneNumber</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00065">ShibbolethAuthenticationMethodImpl.java:65</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a34b97af421dea46b2dd6a03093de56c8"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a34b97af421dea46b2dd6a03093de56c8">org.tdl.vireo.model.Person.getCurrentGraduationMonth</a></div><div class="ttdeci">Integer getCurrentGraduationMonth()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aa5b8d6602a731ca61e14d1187c93c91c"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa5b8d6602a731ca61e14d1187c93c91c">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerMiddleName</a></div><div class="ttdeci">String headerMiddleName</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00061">ShibbolethAuthenticationMethodImpl.java:61</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aae3934839827933bc6ed3289ff4e19b2"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aae3934839827933bc6ed3289ff4e19b2">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerInstitutionalIdentifier</a></div><div class="ttdeci">String headerInstitutionalIdentifier</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00059">ShibbolethAuthenticationMethodImpl.java:59</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a30193fc743365312f4843734791fdeca"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a30193fc743365312f4843734791fdeca">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentCollege</a></div><div class="ttdeci">String headerCurrentCollege</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00073">ShibbolethAuthenticationMethodImpl.java:73</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_aafe011d3cdc10575349d8ae34b4f89f1"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aafe011d3cdc10575349d8ae34b4f89f1">org.tdl.vireo.model.Person.setPermanentPostalAddress</a></div><div class="ttdeci">void setPermanentPostalAddress(String postalAddress)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_ab82af9397bf844037af27134656742b3"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab82af9397bf844037af27134656742b3">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setMock</a></div><div class="ttdeci">void setMock(boolean mock)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00130">ShibbolethAuthenticationMethodImpl.java:130</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl_1_1_abstracc9c94446c8831ec7f0b78eba6ed6f5b2_html"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl_1_1_abstracc9c94446c8831ec7f0b78eba6ed6f5b2.html">org.tdl.vireo.security.impl.AbstractAuthenticationMethodImpl.AbstractImplicitAuthenticationMethod</a></div><div class="ttdef"><b>Definition:</b> <a href="_abstract_authentication_method_impl_8java_source.html#l00199">AbstractAuthenticationMethodImpl.java:199</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a81143e5bafe3220c04698c5a9e85c78b"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a81143e5bafe3220c04698c5a9e85c78b">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.authenticate</a></div><div class="ttdeci">AuthenticationResult authenticate(Request request)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00253">ShibbolethAuthenticationMethodImpl.java:253</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a66ad6efcce203c5fe654bc7a7d8efa94"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a66ad6efcce203c5fe654bc7a7d8efa94">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setLoginForceSSL</a></div><div class="ttdeci">void setLoginForceSSL(boolean loginForceSSL)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00091">ShibbolethAuthenticationMethodImpl.java:91</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a177a132fd4b3a3ed4db2bce5e5f2ef8e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a177a132fd4b3a3ed4db2bce5e5f2ef8e">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerNetId</a></div><div class="ttdeci">String headerNetId</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00057">ShibbolethAuthenticationMethodImpl.java:57</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a503611b79a70bbb618f51f42b45145b7"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a503611b79a70bbb618f51f42b45145b7">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentEmailAddress</a></div><div class="ttdeci">String headerCurrentEmailAddress</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00067">ShibbolethAuthenticationMethodImpl.java:67</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aafc8bcb2ff8cc9e395384faf362fce37"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aafc8bcb2ff8cc9e395384faf362fce37">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.getAttributes</a></div><div class="ttdeci">List&lt; String &gt; getAttributes(Request request, String attribute)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00561">ShibbolethAuthenticationMethodImpl.java:561</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_ab32f42bf90d466d5e1fad65935bf52f8"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ab32f42bf90d466d5e1fad65935bf52f8">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerPermanentPostalAddress</a></div><div class="ttdeci">String headerPermanentPostalAddress</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00069">ShibbolethAuthenticationMethodImpl.java:69</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a0f6827121a5098d2c0e8e560ce035426"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0f6827121a5098d2c0e8e560ce035426">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerLastName</a></div><div class="ttdeci">String headerLastName</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00062">ShibbolethAuthenticationMethodImpl.java:62</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a5daa523234af48d1f628c45ad1ef889c"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a5daa523234af48d1f628c45ad1ef889c">org.tdl.vireo.model.Person.getCurrentCollege</a></div><div class="ttdeci">String getCurrentCollege()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a2b38ce53e25f6204318893790c753ff0"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a2b38ce53e25f6204318893790c753ff0">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentMajor</a></div><div class="ttdeci">String headerCurrentMajor</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00074">ShibbolethAuthenticationMethodImpl.java:74</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html">org.tdl.vireo.model.Person</a></div><div class="ttdef"><b>Definition:</b> <a href="_person_8java_source.html#l00029">Person.java:29</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_abb6bdc9bccf1e0930597eeb34887e193"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#abb6bdc9bccf1e0930597eeb34887e193">org.tdl.vireo.model.Person.getPermanentPhoneNumber</a></div><div class="ttdeci">String getPermanentPhoneNumber()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a0b48ae90bb5f474e9ca226d5cf8e5327"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a0b48ae90bb5f474e9ca226d5cf8e5327">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerAffiliations</a></div><div class="ttdeci">String headerAffiliations</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00064">ShibbolethAuthenticationMethodImpl.java:64</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a2013cbf05ee35969cc829d38890a2541"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a2013cbf05ee35969cc829d38890a2541">org.tdl.vireo.model.Person.setCurrentDegree</a></div><div class="ttdeci">void setCurrentDegree(String degree)</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a3b4d9f56ab218fe59d22dbb297b0f2f3"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a3b4d9f56ab218fe59d22dbb297b0f2f3">org.tdl.vireo.model.Person.setCurrentDepartment</a></div><div class="ttdeci">void setCurrentDepartment(String department)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_ae2452608ed713b99e6f353ed9b941730"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae2452608ed713b99e6f353ed9b941730">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setLoginURL</a></div><div class="ttdeci">void setLoginURL(String loginURL)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00105">ShibbolethAuthenticationMethodImpl.java:105</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_aa69715eaf4fdf1543f69bb0235c62230"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aa69715eaf4fdf1543f69bb0235c62230">org.tdl.vireo.model.Person.getCurrentDepartment</a></div><div class="ttdeci">String getCurrentDepartment()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a31a5f1b2ad84a61b464998a958a425f1"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a31a5f1b2ad84a61b464998a958a425f1">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.mock</a></div><div class="ttdeci">boolean mock</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00038">ShibbolethAuthenticationMethodImpl.java:38</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_adbbd71cf3874ab5f7a5d0fcf3abaea5e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#adbbd71cf3874ab5f7a5d0fcf3abaea5e">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.isEmpty</a></div><div class="ttdeci">static boolean isEmpty(String value)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00627">ShibbolethAuthenticationMethodImpl.java:627</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a50f3175717debca501d752995a4121b1"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a50f3175717debca501d752995a4121b1">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentDepartment</a></div><div class="ttdeci">String headerCurrentDepartment</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00072">ShibbolethAuthenticationMethodImpl.java:72</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_ae18cf215260bd36b545562e98266197a"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ae18cf215260bd36b545562e98266197a">org.tdl.vireo.model.Person.getCurrentGraduationYear</a></div><div class="ttdeci">Integer getCurrentGraduationYear()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a0597e4bd38e23cb7cae3e1075703af5c"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0597e4bd38e23cb7cae3e1075703af5c">org.tdl.vireo.model.Person.getPermanentEmailAddress</a></div><div class="ttdeci">String getPermanentEmailAddress()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a0be1298e441f9a99abd909c385ca295e"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0be1298e441f9a99abd909c385ca295e">org.tdl.vireo.model.Person.getMiddleName</a></div><div class="ttdeci">String getMiddleName()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a48d9fb902545927fbc07df3eed195575"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a48d9fb902545927fbc07df3eed195575">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setLogoutEnabled</a></div><div class="ttdeci">void setLogoutEnabled(boolean enabled)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00175">ShibbolethAuthenticationMethodImpl.java:175</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a0e1e447473a8b77076b55ad209f41bb8"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a0e1e447473a8b77076b55ad209f41bb8">org.tdl.vireo.model.Person.setCurrentMajor</a></div><div class="ttdeci">void setCurrentMajor(String major)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aef8d31af70a6ac8c83e639b2ba9082f5"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aef8d31af70a6ac8c83e639b2ba9082f5">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerCurrentGraduationYear</a></div><div class="ttdeci">String headerCurrentGraduationYear</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00075">ShibbolethAuthenticationMethodImpl.java:75</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_afabfd9f70057bb9389c944dcee03db5c"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#afabfd9f70057bb9389c944dcee03db5c">org.tdl.vireo.model.Person.setCurrentCollege</a></div><div class="ttdeci">void setCurrentCollege(String college)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_af0704fc1d3b9c90fa9c51647f985bd3a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#af0704fc1d3b9c90fa9c51647f985bd3a">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.logoutEnabled</a></div><div class="ttdeci">boolean logoutEnabled</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00054">ShibbolethAuthenticationMethodImpl.java:54</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_acd4c3407eb3c18886f620b5af348afcd"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#acd4c3407eb3c18886f620b5af348afcd">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.loginURL</a></div><div class="ttdeci">String loginURL</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00044">ShibbolethAuthenticationMethodImpl.java:44</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a399235b88ab851053af39a8bcb69a5d4"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a399235b88ab851053af39a8bcb69a5d4">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.mockAttributes</a></div><div class="ttdeci">Map&lt; String, String &gt; mockAttributes</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00080">ShibbolethAuthenticationMethodImpl.java:80</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_ad20cefb14b0d609d289cef16c984d921"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ad20cefb14b0d609d289cef16c984d921">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setAttributeMap</a></div><div class="ttdeci">void setAttributeMap(Map&lt; String, String &gt; attributeMap)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00197">ShibbolethAuthenticationMethodImpl.java:197</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a6674aa143335ab5bdd3d2a95b0c5a63d"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a6674aa143335ab5bdd3d2a95b0c5a63d">org.tdl.vireo.model.Person.getBirthYear</a></div><div class="ttdeci">Integer getBirthYear()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_a5356bcac6675aa5f2cfa0dbab6474337"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#a5356bcac6675aa5f2cfa0dbab6474337">org.tdl.vireo.model.Person.setCurrentPostalAddress</a></div><div class="ttdeci">void setCurrentPostalAddress(String postalAddress)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a3e37339fea26aca5954a2fda4371e42d"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a3e37339fea26aca5954a2fda4371e42d">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerOrcid</a></div><div class="ttdeci">String headerOrcid</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00077">ShibbolethAuthenticationMethodImpl.java:77</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a4c154a34b1e8134c529f722835579af6"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a4c154a34b1e8134c529f722835579af6">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.setMockAttributes</a></div><div class="ttdeci">void setMockAttributes(Map&lt; String, String &gt; mockAttributes)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00146">ShibbolethAuthenticationMethodImpl.java:146</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_ae5c77414d095dd38a8f76ee1939e758d"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#ae5c77414d095dd38a8f76ee1939e758d">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerEmail</a></div><div class="ttdeci">String headerEmail</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00058">ShibbolethAuthenticationMethodImpl.java:58</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_ab3b428bf8e0dbda1a264fffcdc087f57"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ab3b428bf8e0dbda1a264fffcdc087f57">org.tdl.vireo.model.Person.getCurrentEmailAddress</a></div><div class="ttdeci">String getCurrentEmailAddress()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aba45574957a91a71fa61bd16c15c0773"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aba45574957a91a71fa61bd16c15c0773">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerBirthYear</a></div><div class="ttdeci">String headerBirthYear</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00063">ShibbolethAuthenticationMethodImpl.java:63</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_ab5bbdbf4213ddc5e64b3e91bfe770f38"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#ab5bbdbf4213ddc5e64b3e91bfe770f38">org.tdl.vireo.model.Person.getCurrentPhoneNumber</a></div><div class="ttdeci">String getCurrentPhoneNumber()</div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_afb4427834db57f31b6a4637cf7a9c976"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#afb4427834db57f31b6a4637cf7a9c976">org.tdl.vireo.model.Person.setPermanentEmailAddress</a></div><div class="ttdeci">void setPermanentEmailAddress(String email)</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00029">ShibbolethAuthenticationMethodImpl.java:29</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl_html"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl.html">org.tdl.vireo.security.impl.AbstractAuthenticationMethodImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="_abstract_authentication_method_impl_8java_source.html#l00021">AbstractAuthenticationMethodImpl.java:21</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_aa2263b12eee55b8a2f2f775203f61747"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#aa2263b12eee55b8a2f2f775203f61747">org.tdl.vireo.model.Person.getOrcid</a></div><div class="ttdeci">String getOrcid()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a16a48294b00ce7a44d8ba3c4afee7b8a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a16a48294b00ce7a44d8ba3c4afee7b8a">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.startAuthentication</a></div><div class="ttdeci">String startAuthentication(Request request, ActionDefinition returnAction)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00231">ShibbolethAuthenticationMethodImpl.java:231</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_a1d46b5c30ceb906af369eb47a393260a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#a1d46b5c30ceb906af369eb47a393260a">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.logout</a></div><div class="ttdeci">String logout(Request request, String returnURL)</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00510">ShibbolethAuthenticationMethodImpl.java:510</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl_html_aa210b40586b2142bd3046a6fefa5b44c"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_shibboleth_authentication_method_impl.html#aa210b40586b2142bd3046a6fefa5b44c">org.tdl.vireo.security.impl.ShibbolethAuthenticationMethodImpl.headerFirstName</a></div><div class="ttdeci">String headerFirstName</div><div class="ttdef"><b>Definition:</b> <a href="_shibboleth_authentication_method_impl_8java_source.html#l00060">ShibbolethAuthenticationMethodImpl.java:60</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl_html_a1f05f32bc781d337f7bbc4903b83f6ba"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1security_1_1impl_1_1_abstract_authentication_method_impl.html#a1f05f32bc781d337f7bbc4903b83f6ba">org.tdl.vireo.security.impl.AbstractAuthenticationMethodImpl.enabled</a></div><div class="ttdeci">boolean enabled</div><div class="ttdef"><b>Definition:</b> <a href="_abstract_authentication_method_impl_8java_source.html#l00028">AbstractAuthenticationMethodImpl.java:28</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result_html_ad2409d3bc61fe0c76ca7b0ef6bcc440b"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1security_1_1_authentication_result.html#ad2409d3bc61fe0c76ca7b0ef6bcc440b">org.tdl.vireo.security.AuthenticationResult.MISSING_CREDENTIALS</a></div><div class="ttdeci">MISSING_CREDENTIALS</div><div class="ttdef"><b>Definition:</b> <a href="_authentication_result_8java_source.html#l00018">AuthenticationResult.java:18</a></div></div>
<div class="ttc" id="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person_html_afe8b0f6cb043686e5990dc7b92dbeec8"><div class="ttname"><a href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_person.html#afe8b0f6cb043686e5990dc7b92dbeec8">org.tdl.vireo.model.Person.setPermanentPhoneNumber</a></div><div class="ttdeci">void setPermanentPhoneNumber(String phoneNumber)</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li><li class="navelem"><a class="el" href="dir_8dd784b59b4a9f97c6acd22cdbadb1c6.html">org</a></li><li class="navelem"><a class="el" href="dir_60dc62e39f90ceabe5ec09af2c2445af.html">tdl</a></li><li class="navelem"><a class="el" href="dir_07e49d88b1874552035fba0b7e33a8b8.html">vireo</a></li><li class="navelem"><a class="el" href="dir_e0cee8ae42e1943f6860f25bb2a6c377.html">security</a></li><li class="navelem"><a class="el" href="dir_db291fa7012a1b3f6ed2de9d139cb8cf.html">impl</a></li><li class="navelem"><a class="el" href="_shibboleth_authentication_method_impl_8java.html">ShibbolethAuthenticationMethodImpl.java</a></li>
    <li class="footer">Generated on Wed Dec 3 2014 12:37:02 for Vireo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
