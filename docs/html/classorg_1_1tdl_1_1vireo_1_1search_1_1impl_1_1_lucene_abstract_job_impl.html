<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Vireo: org.tdl.vireo.search.impl.LuceneAbstractJobImpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">3.0.x-RC</span>
   </div>
   <div id="projectbrief">Vireo Electronic Thesis and Dissertation Submission System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.tdl.vireo.search.impl.LuceneAbstractJobImpl Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for org.tdl.vireo.search.impl.LuceneAbstractJobImpl:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl__inherit__graph.png" border="0" usemap="#org_8tdl_8vireo_8search_8impl_8_lucene_abstract_job_impl_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8tdl_8vireo_8search_8impl_8_lucene_abstract_job_impl_inherit__map" id="org_8tdl_8vireo_8search_8impl_8_lucene_abstract_job_impl_inherit__map">
<area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_rebuild_job_impl.html" title="org.tdl.vireo.search.impl.\lLuceneRebuildJobImpl" alt="" coords="309,5,475,46"/><area shape="rect" id="node4" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_update_job.html" title="org.tdl.vireo.search.impl.\lLuceneUpdateJob" alt="" coords="309,70,475,111"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for org.tdl.vireo.search.impl.LuceneAbstractJobImpl:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl__coll__graph.png" border="0" usemap="#org_8tdl_8vireo_8search_8impl_8_lucene_abstract_job_impl_coll__map" alt="Collaboration graph"/></div>
<map name="org_8tdl_8vireo_8search_8impl_8_lucene_abstract_job_impl_coll__map" id="org_8tdl_8vireo_8search_8impl_8_lucene_abstract_job_impl_coll__map">
<area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html" title="org.tdl.vireo.search.impl.\lLuceneIndexerImpl" alt="" coords="456,185,621,226"/><area shape="rect" id="node4" href="interfaceorg_1_1tdl_1_1vireo_1_1search_1_1_indexer.html" title="org.tdl.vireo.search.Indexer" alt="" coords="110,5,290,32"/><area shape="rect" id="node7" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission_repository.html" title="org.tdl.vireo.model.Submission\lRepository" alt="" coords="99,158,301,199"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1811d255a85393bdbf43bfad617400bc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a1811d255a85393bdbf43bfad617400bc">LuceneAbstractJobImpl</a> (<a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html">LuceneIndexerImpl</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a86f93b726e9eee0209d971103ef9d5cb">indexer</a>)</td></tr>
<tr class="separator:a1811d255a85393bdbf43bfad617400bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1bd09ea7a96e3ae607b501678443bdf"><td class="memItemLeft" align="right" valign="top">abstract <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html">LuceneAbstractJobImpl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#af1bd09ea7a96e3ae607b501678443bdf">mergeJob</a> (<a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html">LuceneAbstractJobImpl</a> job)</td></tr>
<tr class="separator:af1bd09ea7a96e3ae607b501678443bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9cac05e85b07b632c83354e7c759810"><td class="memItemLeft" align="right" valign="top">abstract String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">getLabel</a> ()</td></tr>
<tr class="separator:ab9cac05e85b07b632c83354e7c759810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34fbece9c4ff3b72cdf5a52d9a5529a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a34fbece9c4ff3b72cdf5a52d9a5529a1">getProgress</a> ()</td></tr>
<tr class="separator:a34fbece9c4ff3b72cdf5a52d9a5529a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62def818528b2583972dcfe3fe33f85e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a62def818528b2583972dcfe3fe33f85e">getTotal</a> ()</td></tr>
<tr class="separator:a62def818528b2583972dcfe3fe33f85e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296d1323e263712664788f236516a438"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a296d1323e263712664788f236516a438">cancelJob</a> ()</td></tr>
<tr class="separator:a296d1323e263712664788f236516a438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae637521c670df26aba0badb489b55d49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ae637521c670df26aba0badb489b55d49">doJob</a> ()</td></tr>
<tr class="separator:ae637521c670df26aba0badb489b55d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b02cdbab95be56fe11d55e4d8d95dce"><td class="memItemLeft" align="right" valign="top">abstract void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a0b02cdbab95be56fe11d55e4d8d95dce">writeIndex</a> ()  throws CorruptIndexException, LockObtainFailedException, IOException,  InterruptedException</td></tr>
<tr class="separator:a0b02cdbab95be56fe11d55e4d8d95dce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac8f674cc39959e92b2d8411c396ef6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#acac8f674cc39959e92b2d8411c396ef6">indexSubmission</a> (IndexWriter writer, <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a> sub)  throws CorruptIndexException, IOException </td></tr>
<tr class="separator:acac8f674cc39959e92b2d8411c396ef6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a86f93b726e9eee0209d971103ef9d5cb"><td class="memItemLeft" align="right" valign="top">final <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html">LuceneIndexerImpl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a86f93b726e9eee0209d971103ef9d5cb">indexer</a></td></tr>
<tr class="separator:a86f93b726e9eee0209d971103ef9d5cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e0ba90bb6d6033c67c1779d3619ca3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a77e0ba90bb6d6033c67c1779d3619ca3">progress</a> = 0</td></tr>
<tr class="separator:a77e0ba90bb6d6033c67c1779d3619ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce4360f059dd16e1234dd0f663aa060"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a9ce4360f059dd16e1234dd0f663aa060">total</a> = 0</td></tr>
<tr class="separator:a9ce4360f059dd16e1234dd0f663aa060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22482ce8a6e62b41714c74fda38310e"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ac22482ce8a6e62b41714c74fda38310e">cancel</a> = false</td></tr>
<tr class="separator:ac22482ce8a6e62b41714c74fda38310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is an abstract lucene job, from which all lucene jobs must extend. Jobs are background threads to update the index. This abstract implementation shares code between the various implementations.</p>
<dl class="section author"><dt>Author</dt><dd><a href="http://www.scottphillips.com">Scott Phillips</a> </dd></dl>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00037">37</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1811d255a85393bdbf43bfad617400bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.LuceneAbstractJobImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html">LuceneIndexerImpl</a>&#160;</td>
          <td class="paramname"><em>indexer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Construct a new index job.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">indexer</td><td>The indexer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00058">58</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>References <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00040">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexer</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                            {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        this.indexer = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a86f93b726e9eee0209d971103ef9d5cb">indexer</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_a86f93b726e9eee0209d971103ef9d5cb"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a86f93b726e9eee0209d971103ef9d5cb">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexer</a></div><div class="ttdeci">final LuceneIndexerImpl indexer</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_abstract_job_impl_8java_source.html#l00040">LuceneAbstractJobImpl.java:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a296d1323e263712664788f236516a438"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.search.impl.LuceneAbstractJobImpl.cancelJob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Single to the running job that it should be cancelled. If the job is currently in progress it will stop after the next submission, rollback any uncommitted changes to the index and finish processing. </p>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00100">100</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                            {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        this.cancel = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae637521c670df26aba0badb489b55d49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.search.impl.LuceneAbstractJobImpl.doJob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start an index job.</p>
<p>This method handles the exceptions </p>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00109">109</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>References <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00051">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.cancel</a>, <a class="el" href="_lucene_indexer_impl_8java_source.html#l00169">org.tdl.vireo.search.impl.LuceneIndexerImpl.corruptIndex</a>, <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getLabel()</a>, <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00040">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexer</a>, <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00048">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.total</a>, and <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a0b02cdbab95be56fe11d55e4d8d95dce">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.writeIndex()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                        {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ac22482ce8a6e62b41714c74fda38310e">cancel</a>) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> InterruptedException(<span class="stringliteral">&quot;Lucene &#39;&quot;</span>+this.<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">getLabel</a>()+<span class="stringliteral">&quot;&#39; job recieved a cancel request before begining processing.&quot;</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordtype">long</span> start = System.currentTimeMillis();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                            </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a0b02cdbab95be56fe11d55e4d8d95dce">writeIndex</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            Logger.debug(<span class="stringliteral">&quot;Lucene &#39;&quot;</span>+this.getLabel()+<span class="stringliteral">&quot;&#39; job processed &quot;</span>+<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a9ce4360f059dd16e1234dd0f663aa060">total</a>+<span class="stringliteral">&quot; submissions completed succesfully in &quot;</span> + ((System.currentTimeMillis()-start)/1000F) +<span class="stringliteral">&quot; seconds.&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="comment">// If we successfully finished, then the index is no longer corrupted.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            indexer.corruptIndex = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        } <span class="keywordflow">catch</span>(CorruptIndexException cie) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="comment">// Attempt to automaticall rebuild the index without intervention. To prevent infinate loops we will only rebuild a maximum of 5 times.</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a86f93b726e9eee0209d971103ef9d5cb">indexer</a>.<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html#a74a0f9b09b705fcf3b0428a929747232">corruptIndex</a>) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                Logger.error(cie, <span class="stringliteral">&quot;Lucene is unable to update index because it is corrupted, attempting to recover by rebuilding the index.&quot;</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                ErrorLog errorLog = Spring.getBeanOfType(ErrorLog.class);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                errorLog.logError(cie,<span class="stringliteral">&quot;Updating search index&quot;</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                indexer.deleteAndRebuild(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ac22482ce8a6e62b41714c74fda38310e">cancel</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                Logger.fatal(cie, <span class="stringliteral">&quot;Lucene&#39;s attempt to rebuild a corrupted index has failed. No further attempts will be made, and searching is disabled.&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                ErrorLog errorLog = Spring.getBeanOfType(ErrorLog.class);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                errorLog.logError(cie, <span class="stringliteral">&quot;Updating search index&quot;</span>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(cie);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        } <span class="keywordflow">catch</span>(LockObtainFailedException lofe) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            Logger.error(lofe, <span class="stringliteral">&quot;Lucene is unable to update search index because it is being locked by another process.&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            ErrorLog errorLog = Spring.getBeanOfType(ErrorLog.class);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            errorLog.logError(lofe, <span class="stringliteral">&quot;Updating search index&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(lofe);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        } <span class="keywordflow">catch</span> (IOException ioe) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            Logger.error(ioe, <span class="stringliteral">&quot;Lucene is unable to update search index because of IO exception.&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            ErrorLog errorLog = Spring.getBeanOfType(ErrorLog.class);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            errorLog.logError(ioe, <span class="stringliteral">&quot;Updating search index&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> RuntimeException(ioe);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        } <span class="keywordflow">catch</span> (InterruptedException ie) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="comment">// We were asked to stop.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            Logger.info(ie.getMessage());</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        } <span class="keywordflow">finally</span> {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="comment">// If we were cancled don&#39;t start the next job.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ac22482ce8a6e62b41714c74fda38310e">cancel</a>)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                indexer.runNextJob(null);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_ac22482ce8a6e62b41714c74fda38310e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ac22482ce8a6e62b41714c74fda38310e">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.cancel</a></div><div class="ttdeci">boolean cancel</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_abstract_job_impl_8java_source.html#l00051">LuceneAbstractJobImpl.java:51</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_a9ce4360f059dd16e1234dd0f663aa060"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a9ce4360f059dd16e1234dd0f663aa060">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.total</a></div><div class="ttdeci">int total</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_abstract_job_impl_8java_source.html#l00048">LuceneAbstractJobImpl.java:48</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_a86f93b726e9eee0209d971103ef9d5cb"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a86f93b726e9eee0209d971103ef9d5cb">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexer</a></div><div class="ttdeci">final LuceneIndexerImpl indexer</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_abstract_job_impl_8java_source.html#l00040">LuceneAbstractJobImpl.java:40</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl_html_a74a0f9b09b705fcf3b0428a929747232"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html#a74a0f9b09b705fcf3b0428a929747232">org.tdl.vireo.search.impl.LuceneIndexerImpl.corruptIndex</a></div><div class="ttdeci">boolean corruptIndex</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_indexer_impl_8java_source.html#l00169">LuceneIndexerImpl.java:169</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_a0b02cdbab95be56fe11d55e4d8d95dce"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a0b02cdbab95be56fe11d55e4d8d95dce">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.writeIndex</a></div><div class="ttdeci">abstract void writeIndex()</div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_ab9cac05e85b07b632c83354e7c759810"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getLabel</a></div><div class="ttdeci">abstract String getLabel()</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ae637521c670df26aba0badb489b55d49_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ae637521c670df26aba0badb489b55d49_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ae637521c670df26aba0badb489b55d49_cgraph" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ae637521c670df26aba0badb489b55d49_cgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810" title="org.tdl.vireo.search.impl.\lLuceneAbstractJobImpl.getLabel" alt="" coords="259,5,471,46"/><area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a0b02cdbab95be56fe11d55e4d8d95dce" title="org.tdl.vireo.search.impl.\lLuceneAbstractJobImpl.writeIndex" alt="" coords="254,70,477,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab9cac05e85b07b632c83354e7c759810"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract String org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getLabel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the displayabel label of this index job. </dd></dl>

<p>Referenced by <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00109">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.doJob()</a>, and <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00197">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexSubmission()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ab9cac05e85b07b632c83354e7c759810_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ab9cac05e85b07b632c83354e7c759810_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ab9cac05e85b07b632c83354e7c759810_icgraph" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_ab9cac05e85b07b632c83354e7c759810_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ae637521c670df26aba0badb489b55d49" title="org.tdl.vireo.search.impl.\lLuceneAbstractJobImpl.doJob" alt="" coords="299,5,498,46"/><area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#acac8f674cc39959e92b2d8411c396ef6" title="org.tdl.vireo.search.impl.\lLuceneAbstractJobImpl.indexSubmission" alt="" coords="267,70,530,111"/><area shape="rect" id="node4" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_rebuild_job_impl.html#a553487382eb15db35edaaa7ac9043e09" title="org.tdl.vireo.search.impl.\lLuceneRebuildJobImpl.writeIndex" alt="" coords="579,37,797,78"/><area shape="rect" id="node5" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_update_job.html#a445faf5baddfe053a8f505372ae9cbb3" title="org.tdl.vireo.search.impl.\lLuceneUpdateJob.writeIndex" alt="" coords="593,102,783,143"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a34fbece9c4ff3b72cdf5a52d9a5529a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getProgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The number of processed submissions. </dd></dl>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00084">84</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>References <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00043">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.progress</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                             {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a77e0ba90bb6d6033c67c1779d3619ca3">progress</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_a77e0ba90bb6d6033c67c1779d3619ca3"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a77e0ba90bb6d6033c67c1779d3619ca3">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.progress</a></div><div class="ttdeci">int progress</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_abstract_job_impl_8java_source.html#l00043">LuceneAbstractJobImpl.java:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62def818528b2583972dcfe3fe33f85e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getTotal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The total number of submissions to be processed. </dd></dl>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00091">91</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>References <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00048">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.total</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                          {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a9ce4360f059dd16e1234dd0f663aa060">total</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_a9ce4360f059dd16e1234dd0f663aa060"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#a9ce4360f059dd16e1234dd0f663aa060">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.total</a></div><div class="ttdeci">int total</div><div class="ttdef"><b>Definition:</b> <a href="_lucene_abstract_job_impl_8java_source.html#l00048">LuceneAbstractJobImpl.java:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acac8f674cc39959e92b2d8411c396ef6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexSubmission </td>
          <td>(</td>
          <td class="paramtype">IndexWriter&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_submission.html">Submission</a>&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> throws CorruptIndexException, IOException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a the provided submission and all associated action logs to the index writer. This method expects that the submission and action logs have been removed from the index, either through a specific delete, or a delete all in the case of rebuilding the index.</p>
<p>This method is used to share code between the various index job implementations so that submissions are written the same no matter who indexes them first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>The index writer. </td></tr>
    <tr><td class="paramname">sub</td><td>The submission to index. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00197">197</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>References <a class="el" href="_name_format_8java_source.html#l00013">org.tdl.vireo.model.NameFormat.FIRST_LAST</a>, <a class="el" href="_name_format_8java_source.html#l00028">org.tdl.vireo.model.NameFormat.FIRST_LAST_BIRTH</a>, <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getLabel()</a>, <a class="el" href="_name_format_8java_source.html#l00033">org.tdl.vireo.model.NameFormat.LAST_FIRST</a>, <a class="el" href="_name_format_8java_source.html#l00048">org.tdl.vireo.model.NameFormat.LAST_FIRST_BIRTH</a>, and <a class="el" href="_name_format_8java_source.html#l00043">org.tdl.vireo.model.NameFormat.LAST_FIRST_MIDDLE_BIRTH</a>.</p>

<p>Referenced by <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00045">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.writeIndex()</a>, and <a class="el" href="_lucene_update_job_8java_source.html#l00083">org.tdl.vireo.search.impl.LuceneUpdateJob.writeIndex()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                                                                                              {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        StringBuilder searchText = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordtype">long</span> subId = sub.getId();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        String state = sub.getState().getDisplayName();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        searchText.append(state).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordtype">long</span> searchAssigned = 0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        String sortAssigned = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> (sub.getAssignee() != null) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            searchAssigned = sub.getAssignee().getId();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            sortAssigned = sub.getAssignee().getFormattedName(NameFormat.LAST_FIRST_MIDDLE_BIRTH);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            searchText.append(sortAssigned).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        Date graduationSemester = null;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">if</span> (sub.getGraduationYear() != null) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            Calendar cal = Calendar.getInstance();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            cal.clear();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            cal.set(Calendar.YEAR, sub.getGraduationYear());</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="keywordflow">if</span> (sub.getGraduationMonth() != null)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                cal.set(Calendar.MONTH,sub.getGraduationMonth());</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            graduationSemester = cal.getTime();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        Date defenseDate = sub.getDefenseDate();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        String department = sub.getDepartment();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        String program = sub.getProgram();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        String college = sub.getCollege();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        String major = sub.getMajor();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        searchText.append(department).append(<span class="stringliteral">&quot; &quot;</span>).append(program).append(<span class="stringliteral">&quot; &quot;</span>).append(college).append(<span class="stringliteral">&quot; &quot;</span>).append(major).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        String embargos = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (sub.getEmbargoTypes().size() &gt; 0) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keywordflow">for</span>(EmbargoType embargo : sub.getEmbargoTypes())</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            embargos += embargo.getName() + <span class="stringliteral">&quot; &quot;</span>;            </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        searchText.append(embargos).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        String degree = sub.getDegree();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        String documentType = sub.getDocumentType();</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        searchText.append(degree).append(<span class="stringliteral">&quot; &quot;</span>).append(documentType).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        Date submissionDate = sub.getSubmissionDate();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        String studentName = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span> (sub.getStudentLastName() != null)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            studentName += sub.getStudentLastName() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> (sub.getStudentFirstName() != null)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            studentName += sub.getStudentFirstName() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">if</span> (sub.getStudentMiddleName() != null)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            studentName += sub.getStudentMiddleName() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        searchText.append(studentName).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        searchText.append(sub.getStudentFormattedName(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format.html#acf958981e58fc23a532a4e0326339fb5">NameFormat.LAST_FIRST_BIRTH</a>)).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        searchText.append(sub.getStudentFormattedName(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format.html#ac508b131000e1c4f43542cf447f87592">NameFormat.FIRST_LAST_BIRTH</a>)).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        String studentEmail = sub.getSubmitter().getEmail();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        searchText.append(studentEmail).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        String institutionalIdentifier = sub.getSubmitter().getInstitutionalIdentifier();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        searchText.append(institutionalIdentifier).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        String documentTitle = sub.getDocumentTitle();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        String documentAbstract = sub.getDocumentAbstract();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        String documentKeywords = sub.getDocumentKeywords();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        searchText.append(documentTitle).append(<span class="stringliteral">&quot; &quot;</span>).append(documentAbstract).append(<span class="stringliteral">&quot; &quot;</span>).append(documentKeywords).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        String documentSubjects = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">for</span> (String subject : sub.getDocumentSubjects()) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            documentSubjects += subject + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        searchText.append(documentSubjects).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        String documentLanguage = null;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (sub.getDocumentLanguageLocale() != null) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            Locale locale = sub.getDocumentLanguageLocale();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            searchText.append(locale.getDisplayName()).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            searchText.append(locale.getDisplayLanguage()).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            searchText.append(locale.getDisplayCountry()).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            searchText.append(locale.getDisplayVariant()).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            documentLanguage = locale.getDisplayName();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        String publishedMaterial = sub.getPublishedMaterial();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        searchText.append(publishedMaterial).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        String primaryDocument = null;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (sub.getPrimaryDocument() != null) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            primaryDocument = sub.getPrimaryDocument().getName();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            searchText.append(primaryDocument).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        Date licenseAgreementDate = sub.getLicenseAgreementDate();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        Date approvalDate = sub.getApprovalDate();</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        Date committeeApprovalDate = sub.getCommitteeApprovalDate();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        Date committeeEmbargoApprovalDate = sub.getCommitteeEmbargoApprovalDate();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        String committeeMembers = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">for</span> (CommitteeMember member : sub.getCommitteeMembers()) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="comment">// TODO: sort by display order?</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            committeeMembers += member.getFormattedName(<a class="code" href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format.html#a226e8d7c09ad12d24d57e181e505736a">NameFormat.LAST_FIRST</a>) + <span class="stringliteral">&quot; &quot;</span> + member.getFormattedRoles();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        searchText.append(committeeMembers).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        String committeeContactEmail = sub.getCommitteeContactEmail();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        searchText.append(committeeContactEmail).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        String umiRelease;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (sub.getUMIRelease() == null) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            umiRelease = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sub.getUMIRelease()) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            umiRelease = <span class="stringliteral">&quot;yes&quot;</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            umiRelease = <span class="stringliteral">&quot;no&quot;</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        String customActions = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">for</span> (CustomActionValue customActionValue : sub.getCustomActions()) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            customActions += customActionValue.getDefinition().<a class="code" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">getLabel</a>() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        searchText.append(customActions).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        String degreeLevel = null;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">if</span> (sub.getDegreeLevel() != null)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            degreeLevel = sub.getDegreeLevel().name();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        searchText.append(degreeLevel).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        String depositId = sub.getDepositId();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        searchText.append(depositId).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        String reviewerNotes = sub.getReviewerNotes();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        searchText.append(reviewerNotes).append(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        String lastEventEntry = null;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        Date lastEventTime = null;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        String orcid = sub.getOrcid();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        List&lt;ActionLog&gt; logs = indexer.subRepo.findActionLog(sub);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">if</span> (logs.size() &gt; 0) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            lastEventEntry = logs.get(0).getEntry();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            lastEventTime = logs.get(0).getActionDate();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            searchText.append(lastEventEntry);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        Document doc = <span class="keyword">new</span> Document();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;subId&quot;</span>,Field.Store.YES,<span class="keyword">true</span>).setLongValue(subId));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;type&quot;</span>,<span class="stringliteral">&quot;submission&quot;</span>,Field.Store.YES,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;searchText&quot;</span>,searchText.toString(),Field.Store.NO,Index.ANALYZED_NO_NORMS));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">if</span> (state != null)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;state&quot;</span>,state,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;searchAssigned&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(searchAssigned));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span> (sortAssigned != null)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;sortAssigned&quot;</span>,sortAssigned,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (graduationSemester != null)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;graduationSemester&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(graduationSemester.getTime()));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">if</span> (defenseDate != null)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;defenseDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(defenseDate.getTime()));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">if</span> (department != null)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;department&quot;</span>,department,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> (program != null)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;program&quot;</span>,program,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">if</span> (college != null)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;college&quot;</span>,college,Field.Store.NO,Index.NOT_ANALYZED));        </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">if</span> (major != null)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;major&quot;</span>,major,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">if</span> (embargos != null) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">for</span> (EmbargoType embargo : sub.getEmbargoTypes()) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;embargo&quot;</span>,embargo.getName(), Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">if</span> (degree != null)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;degree&quot;</span>,degree,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> (documentType != null)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentType&quot;</span>,documentType,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (submissionDate != null)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;submissionDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(submissionDate.getTime()));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> (studentName != null)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;studentName&quot;</span>,studentName, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> (studentEmail != null)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;studentEmail&quot;</span>,studentEmail, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (institutionalIdentifier != null)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;institutionalIdentifier&quot;</span>,institutionalIdentifier,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">if</span> (documentTitle != null)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentTitle&quot;</span>,documentTitle, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (documentAbstract != null)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentAbstract&quot;</span>,documentAbstract, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (documentKeywords != null)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentKeywords&quot;</span>,documentKeywords, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span> (documentSubjects != null)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentSubjects&quot;</span>,documentSubjects, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">if</span> (documentLanguage != null)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentLanguage&quot;</span>,documentLanguage, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">if</span> (publishedMaterial != null)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;publishedMaterial&quot;</span>,publishedMaterial, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> (primaryDocument != null)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;primaryDocument&quot;</span>,primaryDocument, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">if</span> (licenseAgreementDate != null)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;licenseAgreementDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(licenseAgreementDate.getTime()));</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">if</span> (approvalDate != null)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;approvalDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(approvalDate.getTime()));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">if</span> (committeeApprovalDate != null)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;committeeApprovalDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(committeeApprovalDate.getTime()));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">if</span> (committeeEmbargoApprovalDate != null)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;committeeEmbargoApprovalDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(committeeEmbargoApprovalDate.getTime()));</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">if</span> (committeeMembers != null)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;committeeMembers&quot;</span>,committeeMembers,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">if</span> (committeeContactEmail != null)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;committeeContactEmail&quot;</span>,committeeContactEmail,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">if</span> (umiRelease != null)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;umiRelease&quot;</span>,umiRelease,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">for</span> (CustomActionValue customActionValue : sub.getCustomActions()) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;customAction&quot;</span>,customActionValue.getDefinition().getLabel(), Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">if</span> (degreeLevel != null)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;degreeLevel&quot;</span>,degreeLevel,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">if</span> (depositId != null)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;depositId&quot;</span>,depositId,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">if</span> (reviewerNotes != null)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;reviewerNotes&quot;</span>,reviewerNotes,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span> (lastEventEntry != null)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;lastEventEntry&quot;</span>,lastEventEntry,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">if</span> (lastEventTime != null)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;lastEventTime&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(lastEventTime.getTime()));</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">if</span> (orcid !=null)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;orcid&quot;</span>,orcid,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        writer.addDocument(doc);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">for</span> (ActionLog log : logs) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            Long logId = log.getId();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            String logEntry = log.getEntry();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            String logState = log.getSubmissionState().getDisplayName();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="keywordtype">long</span> logSearchAssigned = 0;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            String logSortAssigned = null;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">if</span> (log.getPerson() != null) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                logSearchAssigned = log.getPerson().getId();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                logSortAssigned = log.getPerson().getFormattedName(NameFormat.FIRST_LAST);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            Date logTime = log.getActionDate();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="comment">// The new special things for action logs.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            doc = <span class="keyword">new</span> Document();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;subId&quot;</span>,Field.Store.YES,<span class="keyword">true</span>).setLongValue(subId));</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;logId&quot;</span>,Field.Store.YES,<span class="keyword">true</span>).setLongValue(logId));</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;type&quot;</span>,<span class="stringliteral">&quot;actionlog&quot;</span>,Field.Store.YES,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keywordflow">if</span> (logEntry != null)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;searchText&quot;</span>,logEntry,Field.Store.NO,Index.ANALYZED_NO_NORMS));</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">if</span> (logState != null)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;state&quot;</span>,logState,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;searchAssigned&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(logSearchAssigned));</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <span class="keywordflow">if</span> (logSortAssigned != null)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;sortAssigned&quot;</span>,logSortAssigned,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">if</span> (logEntry != null)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;lastEventEntry&quot;</span>,logEntry,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <span class="keywordflow">if</span> (logTime != null)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;lastEventTime&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(logTime.getTime()));</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="comment">// Stuff that is the same as the submission.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">if</span> (graduationSemester != null)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;graduationSemester&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(graduationSemester.getTime()));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">if</span> (defenseDate != null)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;defenseDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(defenseDate.getTime()));</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">if</span> (department != null)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;department&quot;</span>,department,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">if</span> (program != null)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;program&quot;</span>,program,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="keywordflow">if</span> (college != null)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;college&quot;</span>,college,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">if</span> (major != null)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;major&quot;</span>,major,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">if</span> (embargos != null) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="keywordflow">for</span> (EmbargoType embargo : sub.getEmbargoTypes()) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;embargo&quot;</span>,embargo.getName(), Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <span class="keywordflow">if</span> (degree != null)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;degree&quot;</span>,degree,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <span class="keywordflow">if</span> (documentType != null)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentType&quot;</span>,documentType,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">if</span> (submissionDate != null)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;submissionDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(submissionDate.getTime()));</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <span class="keywordflow">if</span> (studentName != null)</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;studentName&quot;</span>,studentName, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordflow">if</span> (studentEmail != null)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;studentEmail&quot;</span>,studentEmail, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="keywordflow">if</span> (institutionalIdentifier != null)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;institutionalIdentifier&quot;</span>,institutionalIdentifier,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">if</span> (documentAbstract != null)</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentAbstract&quot;</span>,documentAbstract, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> (documentKeywords != null)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentKeywords&quot;</span>,documentKeywords, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">if</span> (documentSubjects != null)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentSubjects&quot;</span>,documentSubjects, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">if</span> (documentLanguage != null)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;documentLanguage&quot;</span>,documentLanguage, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">if</span> (publishedMaterial != null)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;publishedMaterial&quot;</span>,publishedMaterial, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="keywordflow">if</span> (primaryDocument != null)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;primaryDocument&quot;</span>,primaryDocument, Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">if</span> (licenseAgreementDate != null)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;licenseAgreementDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(licenseAgreementDate.getTime()));</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">if</span> (approvalDate != null)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;approvalDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(approvalDate.getTime()));</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">if</span> (committeeApprovalDate != null)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;committeeApprovalDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(committeeApprovalDate.getTime()));</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordflow">if</span> (committeeEmbargoApprovalDate != null)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            doc.add(<span class="keyword">new</span> NumericField(<span class="stringliteral">&quot;committeeEmbargoApprovalDate&quot;</span>,Field.Store.NO,<span class="keyword">true</span>).setLongValue(committeeEmbargoApprovalDate.getTime()));</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            <span class="keywordflow">if</span> (committeeMembers != null)</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;committeeMembers&quot;</span>,committeeMembers,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keywordflow">if</span> (committeeContactEmail != null)</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;committeeContactEmail&quot;</span>,committeeContactEmail,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keywordflow">if</span> (umiRelease != null)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;umiRelease&quot;</span>,umiRelease,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;            </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">for</span> (CustomActionValue customActionValue : sub.getCustomActions()) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;customAction&quot;</span>,customActionValue.getDefinition().getLabel(), Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> (degreeLevel != null)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;degreeLevel&quot;</span>,degreeLevel,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span> (depositId != null)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;depositId&quot;</span>,depositId,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (reviewerNotes != null)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;reviewerNotes&quot;</span>,reviewerNotes,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="keywordflow">if</span> (orcid != null)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            doc.add(<span class="keyword">new</span> Field(<span class="stringliteral">&quot;orcid&quot;</span>,orcid,Field.Store.NO,Index.NOT_ANALYZED));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            writer.addDocument(doc);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="comment">// Detach the log so it dosn&#39;t keep stacking up in memory.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            log.detach();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        } <span class="comment">// for logs</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    } <span class="comment">// indexSubmission(writer,sub)</span></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format_html_a226e8d7c09ad12d24d57e181e505736a"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format.html#a226e8d7c09ad12d24d57e181e505736a">org.tdl.vireo.model.NameFormat.LAST_FIRST</a></div><div class="ttdeci">LAST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="_name_format_8java_source.html#l00033">NameFormat.java:33</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format_html_ac508b131000e1c4f43542cf447f87592"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format.html#ac508b131000e1c4f43542cf447f87592">org.tdl.vireo.model.NameFormat.FIRST_LAST_BIRTH</a></div><div class="ttdeci">FIRST_LAST_BIRTH</div><div class="ttdef"><b>Definition:</b> <a href="_name_format_8java_source.html#l00028">NameFormat.java:28</a></div></div>
<div class="ttc" id="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format_html_acf958981e58fc23a532a4e0326339fb5"><div class="ttname"><a href="enumorg_1_1tdl_1_1vireo_1_1model_1_1_name_format.html#acf958981e58fc23a532a4e0326339fb5">org.tdl.vireo.model.NameFormat.LAST_FIRST_BIRTH</a></div><div class="ttdef"><b>Definition:</b> <a href="_name_format_8java_source.html#l00048">NameFormat.java:48</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_html_ab9cac05e85b07b632c83354e7c759810"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getLabel</a></div><div class="ttdeci">abstract String getLabel()</div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_cgraph" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_cgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ab9cac05e85b07b632c83354e7c759810" title="org.tdl.vireo.search.impl.\lLuceneAbstractJobImpl.getLabel" alt="" coords="318,5,530,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_icgraph" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_acac8f674cc39959e92b2d8411c396ef6_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_rebuild_job_impl.html#a553487382eb15db35edaaa7ac9043e09" title="org.tdl.vireo.search.impl.\lLuceneRebuildJobImpl.writeIndex" alt="" coords="317,5,536,46"/><area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_update_job.html#a445faf5baddfe053a8f505372ae9cbb3" title="org.tdl.vireo.search.impl.\lLuceneUpdateJob.writeIndex" alt="" coords="331,70,522,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1bd09ea7a96e3ae607b501678443bdf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html">LuceneAbstractJobImpl</a> org.tdl.vireo.search.impl.LuceneAbstractJobImpl.mergeJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html">LuceneAbstractJobImpl</a>&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Merge the two jobs together forming one job. The particular implementation of the job needs to figure out the details so that no submission update is left without being updated. It may be assumed that this method will only be called prior to a job actual being started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">job</td><td>The job to merge with. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The merged job (it may be the same instance, or a new instance) </dd></dl>

</div>
</div>
<a class="anchor" id="a0b02cdbab95be56fe11d55e4d8d95dce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">abstract void org.tdl.vireo.search.impl.LuceneAbstractJobImpl.writeIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> throws CorruptIndexException, LockObtainFailedException, IOException,  InterruptedException</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">abstract</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write the index.</p>
<p>This method may throw the following exceptions, and the caller is expected to handle them.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">CorruptIndexException</td><td></td></tr>
    <tr><td class="paramname">LockObtainFailedException</td><td></td></tr>
    <tr><td class="paramname">IOException</td><td></td></tr>
    <tr><td class="paramname">InterruptedException</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00109">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.doJob()</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_a0b02cdbab95be56fe11d55e4d8d95dce_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_a0b02cdbab95be56fe11d55e4d8d95dce_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_a0b02cdbab95be56fe11d55e4d8d95dce_icgraph" id="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl_a0b02cdbab95be56fe11d55e4d8d95dce_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html#ae637521c670df26aba0badb489b55d49" title="org.tdl.vireo.search.impl.\lLuceneAbstractJobImpl.doJob" alt="" coords="278,5,477,46"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ac22482ce8a6e62b41714c74fda38310e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean org.tdl.vireo.search.impl.LuceneAbstractJobImpl.cancel = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00051">51</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00109">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.doJob()</a>, <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00045">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.writeIndex()</a>, and <a class="el" href="_lucene_update_job_8java_source.html#l00083">org.tdl.vireo.search.impl.LuceneUpdateJob.writeIndex()</a>.</p>

</div>
</div>
<a class="anchor" id="a86f93b726e9eee0209d971103ef9d5cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_indexer_impl.html">LuceneIndexerImpl</a> org.tdl.vireo.search.impl.LuceneAbstractJobImpl.indexer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00040">40</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00109">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.doJob()</a>, <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00058">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.LuceneAbstractJobImpl()</a>, <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00045">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.writeIndex()</a>, and <a class="el" href="_lucene_update_job_8java_source.html#l00083">org.tdl.vireo.search.impl.LuceneUpdateJob.writeIndex()</a>.</p>

</div>
</div>
<a class="anchor" id="a77e0ba90bb6d6033c67c1779d3619ca3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int org.tdl.vireo.search.impl.LuceneAbstractJobImpl.progress = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00043">43</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00084">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getProgress()</a>, <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00026">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.LuceneRebuildJobImpl()</a>, <a class="el" href="_lucene_update_job_8java_source.html#l00047">org.tdl.vireo.search.impl.LuceneUpdateJob.LuceneUpdateJob()</a>, <a class="el" href="_lucene_update_job_8java_source.html#l00061">org.tdl.vireo.search.impl.LuceneUpdateJob.mergeJob()</a>, <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00045">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.writeIndex()</a>, and <a class="el" href="_lucene_update_job_8java_source.html#l00083">org.tdl.vireo.search.impl.LuceneUpdateJob.writeIndex()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ce4360f059dd16e1234dd0f663aa060"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int org.tdl.vireo.search.impl.LuceneAbstractJobImpl.total = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00048">48</a> of file <a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00109">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.doJob()</a>, <a class="el" href="_lucene_abstract_job_impl_8java_source.html#l00091">org.tdl.vireo.search.impl.LuceneAbstractJobImpl.getTotal()</a>, <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00026">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.LuceneRebuildJobImpl()</a>, <a class="el" href="_lucene_update_job_8java_source.html#l00047">org.tdl.vireo.search.impl.LuceneUpdateJob.LuceneUpdateJob()</a>, <a class="el" href="_lucene_update_job_8java_source.html#l00061">org.tdl.vireo.search.impl.LuceneUpdateJob.mergeJob()</a>, <a class="el" href="_lucene_rebuild_job_impl_8java_source.html#l00045">org.tdl.vireo.search.impl.LuceneRebuildJobImpl.writeIndex()</a>, and <a class="el" href="_lucene_update_job_8java_source.html#l00083">org.tdl.vireo.search.impl.LuceneUpdateJob.writeIndex()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>app/org/tdl/vireo/search/impl/<a class="el" href="_lucene_abstract_job_impl_8java_source.html">LuceneAbstractJobImpl.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceorg.html">org</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl.html">tdl</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo.html">vireo</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1search.html">search</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1search_1_1impl.html">impl</a></li><li class="navelem"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1search_1_1impl_1_1_lucene_abstract_job_impl.html">LuceneAbstractJobImpl</a></li>
    <li class="footer">Generated on Wed Nov 19 2014 12:49:42 for Vireo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
