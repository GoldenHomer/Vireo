<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Vireo: org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Vireo
   &#160;<span id="projectnumber">3.0.x-RC4</span>
   </div>
   <div id="projectbrief">Vireo Electronic Thesis and Dissertation Submission System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl__inherit__graph.png" border="0" usemap="#org_8tdl_8vireo_8email_8impl_8_system_email_template_service_impl_inherit__map" alt="Inheritance graph"/></div>
<map name="org_8tdl_8vireo_8email_8impl_8_system_email_template_service_impl_inherit__map" id="org_8tdl_8vireo_8email_8impl_8_system_email_template_service_impl_inherit__map">
<area shape="rect" id="node2" href="interfaceorg_1_1tdl_1_1vireo_1_1email_1_1_system_email_template_service.html" title="org.tdl.vireo.email.System\lEmailTemplateService" alt="" coords="29,6,203,47"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl__coll__graph.png" border="0" usemap="#org_8tdl_8vireo_8email_8impl_8_system_email_template_service_impl_coll__map" alt="Collaboration graph"/></div>
<map name="org_8tdl_8vireo_8email_8impl_8_system_email_template_service_impl_coll__map" id="org_8tdl_8vireo_8email_8impl_8_system_email_template_service_impl_coll__map">
<area shape="rect" id="node2" href="interfaceorg_1_1tdl_1_1vireo_1_1email_1_1_system_email_template_service.html" title="org.tdl.vireo.email.System\lEmailTemplateService" alt="" coords="14,5,189,46"/><area shape="rect" id="node3" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_settings_repository.html" title="org.tdl.vireo.model.Settings\lRepository" alt="" coords="11,70,192,111"/><area shape="rect" id="node4" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html" title="org.tdl.vireo.security.Security\lContext" alt="" coords="5,135,197,177"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_1_1initialize_system_email_templates.html">initializeSystemEmailTemplates</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a285e53daf0b158ab9452e71bada78ecb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a285e53daf0b158ab9452e71bada78ecb">setSettingsRepository</a> (<a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_settings_repository.html">SettingsRepository</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac878dd099f166faa44ea99ac9c03db2a">settingRepo</a>)</td></tr>
<tr class="separator:a285e53daf0b158ab9452e71bada78ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae94aa7ce022348df40687b29c0aaf883"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ae94aa7ce022348df40687b29c0aaf883">setSecurityContext</a> (<a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html">SecurityContext</a> <a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a52f143fe07fd5ec328019558055a1c06">context</a>)</td></tr>
<tr class="separator:ae94aa7ce022348df40687b29c0aaf883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fedc4c8a1468472681a303c32c3982"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_email_template.html">EmailTemplate</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#af5fedc4c8a1468472681a303c32c3982">generateSystemEmailTemplate</a> (String name)</td></tr>
<tr class="separator:af5fedc4c8a1468472681a303c32c3982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24b41287d47e2c854966e5a1e2561f2"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_email_template.html">EmailTemplate</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac24b41287d47e2c854966e5a1e2561f2">generateAllSystemEmailTemplates</a> ()</td></tr>
<tr class="separator:ac24b41287d47e2c854966e5a1e2561f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeab6370b5dde0e1bb7037c66269d8f50"><td class="memItemLeft" align="right" valign="top">List&lt; String &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#aeab6370b5dde0e1bb7037c66269d8f50">getAllSystemEmailTemplateNames</a> ()</td></tr>
<tr class="separator:aeab6370b5dde0e1bb7037c66269d8f50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a52f143fe07fd5ec328019558055a1c06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html">SecurityContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a52f143fe07fd5ec328019558055a1c06">context</a></td></tr>
<tr class="separator:a52f143fe07fd5ec328019558055a1c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac878dd099f166faa44ea99ac9c03db2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_settings_repository.html">SettingsRepository</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac878dd099f166faa44ea99ac9c03db2a">settingRepo</a></td></tr>
<tr class="separator:ac878dd099f166faa44ea99ac9c03db2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a1e87bf38a6cd8abc2ca039d206c4ac2e"><td class="memItemLeft" align="right" valign="top">static final String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a1e87bf38a6cd8abc2ca039d206c4ac2e">BASE_PATH</a> = Play.applicationPath + File.separator + &quot;conf&quot;+File.separator+&quot;emails&quot;+File.separator</td></tr>
<tr class="separator:a1e87bf38a6cd8abc2ca039d206c4ac2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a8787de3ab55af60c634f718c9cede"><td class="memItemLeft" align="right" valign="top">static final Pattern&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a33a8787de3ab55af60c634f718c9cede">SUBJECT_PATTERN</a> = Pattern.compile(&quot;\\s*Subject:(.*)[\\n\\r]{1}&quot;)</td></tr>
<tr class="separator:a33a8787de3ab55af60c634f718c9cede"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9bb7cdd7aed33da43255768c86783b81"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a9bb7cdd7aed33da43255768c86783b81">encodeTemplateName</a> (String name)</td></tr>
<tr class="separator:a9bb7cdd7aed33da43255768c86783b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea528a8605d1c568a738dedab7eacae"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a6ea528a8605d1c568a738dedab7eacae">decodeTemplateName</a> (String path)</td></tr>
<tr class="separator:a6ea528a8605d1c568a738dedab7eacae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manage all pre-defined system email templates. This implementation manages all the templates found in /conf/emails/[name].email. On application start these templates will be loaded into persistent storage if they are not already present. Also at any time vireo can refresh the template with the pre-defined version individually with the <a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#af5fedc4c8a1468472681a303c32c3982">generateSystemEmailTemplate()</a> method.</p>
<dl class="section author"><dt>Author</dt><dd><a href="http://www.scottphillips.com">Scott Phillips</a> </dd></dl>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00030">30</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6ea528a8605d1c568a738dedab7eacae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.decodeTemplateName </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decode a template file name into a template name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The file name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The template name. </dd></dl>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00168">168</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00132">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.getAllSystemEmailTemplateNames()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                                     {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> (path.endsWith(<span class="stringliteral">&quot;.email&quot;</span>))</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            path = path.substring(0,path.length() - <span class="stringliteral">&quot;.email&quot;</span>.length());</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">return</span> path.replaceAll(<span class="stringliteral">&quot;_&quot;</span>, <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a6ea528a8605d1c568a738dedab7eacae_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a6ea528a8605d1c568a738dedab7eacae_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a6ea528a8605d1c568a738dedab7eacae_icgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a6ea528a8605d1c568a738dedab7eacae_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#aeab6370b5dde0e1bb7037c66269d8f50" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.get\lAllSystemEmailTemplateNames" alt="" coords="323,4,568,60"/><area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac24b41287d47e2c854966e5a1e2561f2" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.generate\lAllSystemEmailTemplates" alt="" coords="616,4,893,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9bb7cdd7aed33da43255768c86783b81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.encodeTemplateName </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Encode a template name to a file name on disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The template name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file path. </dd></dl>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00156">156</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00057">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateSystemEmailTemplate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                                     {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keywordflow">return</span> name.replaceAll(<span class="stringliteral">&quot; &quot;</span>,<span class="stringliteral">&quot;_&quot;</span>) + <span class="stringliteral">&quot;.email&quot;</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a9bb7cdd7aed33da43255768c86783b81_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a9bb7cdd7aed33da43255768c86783b81_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a9bb7cdd7aed33da43255768c86783b81_icgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_a9bb7cdd7aed33da43255768c86783b81_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#af5fedc4c8a1468472681a303c32c3982" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.generate\lSystemEmailTemplate" alt="" coords="323,4,600,60"/><area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac24b41287d47e2c854966e5a1e2561f2" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.generate\lAllSystemEmailTemplates" alt="" coords="648,4,925,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac24b41287d47e2c854966e5a1e2561f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;<a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_email_template.html">EmailTemplate</a>&gt; org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateAllSystemEmailTemplates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scan all system defined email templates and if they do not exist in persistent storage load it into persistent storage. If the template already exists, then it will be left alone.</p>
<p>This method is intended to be called on application startup so that all templates get generated for a manager to modify without waiting for the event to be triggered.</p>
<dl class="section return"><dt>Returns</dt><dd>A list of newly generated email templates, if no templates were generated because they all exist in persistent storage then an empty list is returned. </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1email_1_1_system_email_template_service.html#a0065e356bec4a0a1dc1f818c5c164013">org.tdl.vireo.email.SystemEmailTemplateService</a>.</p>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00115">115</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>References <a class="el" href="_system_email_template_service_impl_8java_source.html#l00057">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateSystemEmailTemplate()</a>, and <a class="el" href="_system_email_template_service_impl_8java_source.html#l00132">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.getAllSystemEmailTemplateNames()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                                                                 {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        List&lt;EmailTemplate&gt; created = <span class="keyword">new</span> ArrayList&lt;EmailTemplate&gt;();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">for</span> (String name : <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#aeab6370b5dde0e1bb7037c66269d8f50">getAllSystemEmailTemplateNames</a>()) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            EmailTemplate <span class="keyword">template</span> = settingRepo.findEmailTemplateByName(name);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">template</span> == null) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="keyword">template</span> = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#af5fedc4c8a1468472681a303c32c3982">generateSystemEmailTemplate</a>(name);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                created.add(<span class="keyword">template</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">return</span> created;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_aeab6370b5dde0e1bb7037c66269d8f50"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#aeab6370b5dde0e1bb7037c66269d8f50">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.getAllSystemEmailTemplateNames</a></div><div class="ttdeci">List&lt; String &gt; getAllSystemEmailTemplateNames()</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00132">SystemEmailTemplateServiceImpl.java:132</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_af5fedc4c8a1468472681a303c32c3982"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#af5fedc4c8a1468472681a303c32c3982">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateSystemEmailTemplate</a></div><div class="ttdeci">EmailTemplate generateSystemEmailTemplate(String name)</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00057">SystemEmailTemplateServiceImpl.java:57</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_ac24b41287d47e2c854966e5a1e2561f2_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_ac24b41287d47e2c854966e5a1e2561f2_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_ac24b41287d47e2c854966e5a1e2561f2_cgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_ac24b41287d47e2c854966e5a1e2561f2_cgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#af5fedc4c8a1468472681a303c32c3982" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.generate\lSystemEmailTemplate" alt="" coords="331,4,608,60"/><area shape="rect" id="node4" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#aeab6370b5dde0e1bb7037c66269d8f50" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.get\lAllSystemEmailTemplateNames" alt="" coords="347,84,592,140"/><area shape="rect" id="node3" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a9bb7cdd7aed33da43255768c86783b81" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.encode\lTemplateName" alt="" coords="656,4,925,60"/><area shape="rect" id="node5" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a6ea528a8605d1c568a738dedab7eacae" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.decode\lTemplateName" alt="" coords="656,84,925,140"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af5fedc4c8a1468472681a303c32c3982"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_email_template.html">EmailTemplate</a> org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateSystemEmailTemplate </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate a fresh email template from the pre-defined templates. The email template will be saved to persistent storage. If the template already exists in the persistent storage then it's definition will be replaced with the default.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the email template. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new unsaved email template. </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1email_1_1_system_email_template_service.html#aaeed3a0468fdcbef6f592f755a687eb0">org.tdl.vireo.email.SystemEmailTemplateService</a>.</p>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00057">57</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>References <a class="el" href="_system_email_template_service_impl_8java_source.html#l00034">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.BASE_PATH</a>, and <a class="el" href="_system_email_template_service_impl_8java_source.html#l00156">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.encodeTemplateName()</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00115">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateAllSystemEmailTemplates()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                                  {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            String templatePath = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a1e87bf38a6cd8abc2ca039d206c4ac2e">BASE_PATH</a> + <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a9bb7cdd7aed33da43255768c86783b81">encodeTemplateName</a>(name);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            File templateFile = <span class="keyword">new</span> File(templatePath);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            String data = FileUtils.readFileToString(templateFile);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="comment">// Remove any comment lines</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            data = data.replaceAll(<span class="stringliteral">&quot;\\s*#.*[\\n\\r]{1}&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="comment">// Extract the subject</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            Matcher subjectMatcher = SUBJECT_PATTERN.matcher(data);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">if</span> (!subjectMatcher.find())</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="stringliteral">&quot;Unable to identify the template&#39;s subject.&quot;</span>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            String subject = subjectMatcher.group(1).trim();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="comment">// Trim the subject leaving just the body.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordtype">int</span> index = data.indexOf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">if</span> (index &lt; 0 )</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                index = data.indexOf(<span class="stringliteral">&quot;\r&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            String message = data.substring(index);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordflow">if</span> (subject == null || subject.length() == 0)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="stringliteral">&quot;Unable to identify the template&#39;s subject.&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keywordflow">if</span> (message == null || message.length() == 0)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="stringliteral">&quot;Unable to identify the template&#39;s message.&quot;</span>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                context.turnOffAuthorization();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <span class="comment">// Check if the template already exists</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                EmailTemplate <span class="keyword">template</span> = settingRepo.findEmailTemplateByName(name);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordflow">if</span> (<span class="keyword">template</span> == null) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                    <span class="comment">// The template dosn&#39;t exist, so create a new one.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                    <span class="keyword">template</span> = settingRepo.createEmailTemplate(name,subject, message);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="comment">// The template already exists. Update it&#39;s contents.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    template.setSubject(subject);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    template.setMessage(message);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                template.setSystemRequired(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                template.save();</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">template</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            } <span class="keywordflow">finally</span> {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                context.restoreAuthorization();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        } <span class="keywordflow">catch</span> (Exception e) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordflow">throw</span> <span class="keyword">new</span> IllegalStateException(</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="stringliteral">&quot;Unable to generate system email template: &quot;</span> + name, e);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_a9bb7cdd7aed33da43255768c86783b81"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a9bb7cdd7aed33da43255768c86783b81">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.encodeTemplateName</a></div><div class="ttdeci">String encodeTemplateName(String name)</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00156">SystemEmailTemplateServiceImpl.java:156</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_a1e87bf38a6cd8abc2ca039d206c4ac2e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a1e87bf38a6cd8abc2ca039d206c4ac2e">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.BASE_PATH</a></div><div class="ttdeci">static final String BASE_PATH</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00034">SystemEmailTemplateServiceImpl.java:34</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_cgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_cgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a9bb7cdd7aed33da43255768c86783b81" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.encode\lTemplateName" alt="" coords="331,4,600,60"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_icgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_af5fedc4c8a1468472681a303c32c3982_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac24b41287d47e2c854966e5a1e2561f2" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.generate\lAllSystemEmailTemplates" alt="" coords="331,4,608,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeab6370b5dde0e1bb7037c66269d8f50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;String&gt; org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.getAllSystemEmailTemplateNames </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return a list of the names of all pre-defined system email templates. </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1email_1_1_system_email_template_service.html#a4fc78794151dd6b12d5fdbbd01da12f4">org.tdl.vireo.email.SystemEmailTemplateService</a>.</p>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00132">132</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>References <a class="el" href="_system_email_template_service_impl_8java_source.html#l00034">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.BASE_PATH</a>, and <a class="el" href="_system_email_template_service_impl_8java_source.html#l00168">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.decodeTemplateName()</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00115">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateAllSystemEmailTemplates()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                                         {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        File directory = <span class="keyword">new</span> File(<a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a1e87bf38a6cd8abc2ca039d206c4ac2e">BASE_PATH</a>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        List&lt;String&gt; names = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">for</span> (File file : directory.listFiles()) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordflow">if</span> (file.isFile()) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                String fileName = file.getName();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                String templateName = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a6ea528a8605d1c568a738dedab7eacae">decodeTemplateName</a>(fileName);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                names.add(templateName);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">return</span> names;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_a1e87bf38a6cd8abc2ca039d206c4ac2e"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a1e87bf38a6cd8abc2ca039d206c4ac2e">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.BASE_PATH</a></div><div class="ttdeci">static final String BASE_PATH</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00034">SystemEmailTemplateServiceImpl.java:34</a></div></div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_a6ea528a8605d1c568a738dedab7eacae"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a6ea528a8605d1c568a738dedab7eacae">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.decodeTemplateName</a></div><div class="ttdeci">String decodeTemplateName(String path)</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00168">SystemEmailTemplateServiceImpl.java:168</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_cgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_cgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_cgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_cgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a6ea528a8605d1c568a738dedab7eacae" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.decode\lTemplateName" alt="" coords="299,4,568,60"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_icgraph.png" border="0" usemap="#classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_icgraph" alt=""/></div>
<map name="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_icgraph" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_aeab6370b5dde0e1bb7037c66269d8f50_icgraph">
<area shape="rect" id="node2" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac24b41287d47e2c854966e5a1e2561f2" title="org.tdl.vireo.email.impl.\lSystemEmailTemplateServiceImpl.generate\lAllSystemEmailTemplates" alt="" coords="299,4,576,60"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae94aa7ce022348df40687b29c0aaf883"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.setSecurityContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html">SecurityContext</a>&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The security context. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00051">51</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>References <a class="el" href="_system_email_template_service_impl_8java_source.html#l00038">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.context</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                                                            {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        this.context = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a52f143fe07fd5ec328019558055a1c06">context</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_a52f143fe07fd5ec328019558055a1c06"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#a52f143fe07fd5ec328019558055a1c06">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.context</a></div><div class="ttdeci">SecurityContext context</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00038">SystemEmailTemplateServiceImpl.java:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a285e53daf0b158ab9452e71bada78ecb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.setSettingsRepository </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_settings_repository.html">SettingsRepository</a>&#160;</td>
          <td class="paramname"><em>settingRepo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">settingRepo</td><td>The settings repository used for generating email templates. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00044">44</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>References <a class="el" href="_system_email_template_service_impl_8java_source.html#l00039">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.settingRepo</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                                                      {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        this.settingRepo = <a class="code" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac878dd099f166faa44ea99ac9c03db2a">settingRepo</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div>
<div class="ttc" id="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl_html_ac878dd099f166faa44ea99ac9c03db2a"><div class="ttname"><a href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html#ac878dd099f166faa44ea99ac9c03db2a">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.settingRepo</a></div><div class="ttdeci">SettingsRepository settingRepo</div><div class="ttdef"><b>Definition:</b> <a href="_system_email_template_service_impl_8java_source.html#l00039">SystemEmailTemplateServiceImpl.java:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a1e87bf38a6cd8abc2ca039d206c4ac2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final String org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.BASE_PATH = Play.applicationPath + File.separator + &quot;conf&quot;+File.separator+&quot;emails&quot;+File.separator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00034">34</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00057">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.generateSystemEmailTemplate()</a>, and <a class="el" href="_system_email_template_service_impl_8java_source.html#l00132">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.getAllSystemEmailTemplateNames()</a>.</p>

</div>
</div>
<a class="anchor" id="a52f143fe07fd5ec328019558055a1c06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1security_1_1_security_context.html">SecurityContext</a> org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.context</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00038">38</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00051">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.setSecurityContext()</a>.</p>

</div>
</div>
<a class="anchor" id="ac878dd099f166faa44ea99ac9c03db2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceorg_1_1tdl_1_1vireo_1_1model_1_1_settings_repository.html">SettingsRepository</a> org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.settingRepo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00039">39</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

<p>Referenced by <a class="el" href="_system_email_template_service_impl_8java_source.html#l00044">org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.setSettingsRepository()</a>.</p>

</div>
</div>
<a class="anchor" id="a33a8787de3ab55af60c634f718c9cede"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">final Pattern org.tdl.vireo.email.impl.SystemEmailTemplateServiceImpl.SUBJECT_PATTERN = Pattern.compile(&quot;\\s*Subject:(.*)[\\n\\r]{1}&quot;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_system_email_template_service_impl_8java_source.html#l00035">35</a> of file <a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>app/org/tdl/vireo/email/impl/<a class="el" href="_system_email_template_service_impl_8java_source.html">SystemEmailTemplateServiceImpl.java</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceorg.html">org</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl.html">tdl</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo.html">vireo</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1email.html">email</a></li><li class="navelem"><a class="el" href="namespaceorg_1_1tdl_1_1vireo_1_1email_1_1impl.html">impl</a></li><li class="navelem"><a class="el" href="classorg_1_1tdl_1_1vireo_1_1email_1_1impl_1_1_system_email_template_service_impl.html">SystemEmailTemplateServiceImpl</a></li>
    <li class="footer">Generated on Thu Feb 12 2015 12:31:08 for Vireo by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
